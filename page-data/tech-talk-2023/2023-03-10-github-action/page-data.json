{"componentChunkName":"component---src-templates-blog-template-js","path":"/tech-talk-2023/2023-03-10-github-action/","result":{"data":{"cur":{"id":"e91f079b-4ae8-5018-b3fd-003955235db3","html":"<h3 id=\"github-action-찍먹하기\" style=\"position:relative;\"><a href=\"#github-action-%EC%B0%8D%EB%A8%B9%ED%95%98%EA%B8%B0\" aria-label=\"github action 찍먹하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>github action 찍먹하기</h3>\n<p>github action 소개</p>\n<p>최근 간략한 신규 프로젝트를 진행하면서, 별도의 CI/CD 대신 github action을 통해서 CI/CD 의 기능을 구현해보았는데, 생각보다 편리하고 쓸만하여, github action에 대하여 찍먹하기 정리를 해보았습니다.</p>\n<p><strong>github action 이란? github 에서 제공하는 workflow feature</strong>입니다. <a href=\"https://github.com/features/actions\">github의 공식 홈페이지</a>에서 이를 통하여 결국 CI/CD 의 기능을 할 수 있다고 소개하고 있습니다.  사실 CI/CD 라고 했을때 Jenkins, Travis CI, CirCleCI 등등 와 같은 여러 툴들이 이미 존재하고, 이미 수많은 프로젝트에서 해당 툴들을 사용하고 있습니다.</p>\n<p>결론부터 이야기 하자면, 이미 만들어진 바퀴를 또 발명할 필요가 없듯, 이미 잘 사용하고 있고, 탄탄하게 구축된 CI/CD 가 있다면, 굳이 github action을 쓰지 않아도 됩니다. 하지만 신규 프로젝트이고 github을 사용한다면 <strong>github action</strong>을 통한 workflow(CI/CD) 구축은 <strong>충분히 고려해 볼만한 좋은 옵션</strong>인것 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHUlEQVQY032OzUrDQBSF87IFK6L2RVqt1WJ8hApalbp0Ibjuxl2bZFPSTP7TzP2ZmXQkrRQF8XIWl8P5OMc5Hi1ORn536HWHy/mitFbfv4ue65+NvaNLr3Ox/Ayqxqi717Dn+qc3XmfgnY/9pGJW2hk8rEbTcPjYarGqrTVv87Q/CW5n0fhFXE3XwVo2jXn6iPqTwJ2J62fhzqJ8w8TasT9OaSNRG6M0txOsNdZaVlqSaQwbLvbmdrsFUkDKqUEdJFEDaYkqFIlI8igtamgbgHQNFIokzso4K4H0N7z7fglJiTjJ8jIrK2S1hwEpjERWVFlRsdK44/+G1yJO8yLNS6S2WbYwb2opgSQQsYJ/YAkIyBLbHB58Nsga+ZBUX5vJfaNQwxuiAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github action1\"\n        title=\"github action1\"\n        src=\"/static/01a4d764abc20721a58d5c2ee7841561/37523/github-action1.png\"\n        srcset=\"/static/01a4d764abc20721a58d5c2ee7841561/e9ff0/github-action1.png 180w,\n/static/01a4d764abc20721a58d5c2ee7841561/f21e7/github-action1.png 360w,\n/static/01a4d764abc20721a58d5c2ee7841561/37523/github-action1.png 720w,\n/static/01a4d764abc20721a58d5c2ee7841561/302a4/github-action1.png 1080w,\n/static/01a4d764abc20721a58d5c2ee7841561/f793b/github-action1.png 1404w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>출처: <a href=\"https://docs.github.com/assets/cb-25535/mw-1000/images/help/images/overview-actions-simple.webp\">https://docs.github.com/assets/cb-25535/mw-1000/images/help/images/overview-actions-simple.webp</a></p>\n<h3 id=\"할-수-있는-건\" style=\"position:relative;\"><a href=\"#%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EA%B1%B4\" aria-label=\"할 수 있는 건 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>할 수 있는 건?</h3>\n<p>사실 <strong>CI/CD 에서 할 수 있는 대부분은 다 할 수 있습니다</strong>. 보통 CI/CD을 통해서 가장 많이 사용하는 기능 역시 당연히 가능합니다. 예를 들어서 아래와 같은 것들 말이죠.(그외 여러가지 자동화된 CI/CD가 가능합니다.)</p>\n<ul>\n<li>pull request 을 자동 코드리뷰하기</li>\n<li>code lint, code unit test 돌리기</li>\n<li>build 돌리기</li>\n<li>deploy 하기</li>\n<li>cron 형태로 돌리기</li>\n</ul>\n<h3 id=\"장점\" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EC%A0%90\" aria-label=\"장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>장점</h3>\n<h4 id=\"모든것이-github-화면에서-이루어진다\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0%EA%B2%83%EC%9D%B4-github-%ED%99%94%EB%A9%B4%EC%97%90%EC%84%9C-%EC%9D%B4%EB%A3%A8%EC%96%B4%EC%A7%84%EB%8B%A4\" aria-label=\"모든것이 github 화면에서 이루어진다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>“모든것이 github 화면에서 이루어진다”</strong></h4>\n<p>예를 들어 pull request을 만들었을때 자동으로, lint나 unit test을 하고, 해당 결과을 pull request에 comment로 작성하고, approve나 request changes 을 남기는 등의 동작이 가능합니다.</p>\n<p>사실 <strong>github 자체가 webhook 및 github rest api 을 지원</strong>하기 때문에, <strong>다른 CI/CD 툴을 이용하여도</strong>, 위 동작이 가능하기는 합니다. 하지만 다른 CI/CD 툴은 해당 툴의 화면과 github 화면을 서로 스위치 하면서 봐야하는데, 이에 반해 github의 actions은 동일한 web page에서 action탭을 어떤 CI/CD 용 Job이 어떻게 돌아서 해당 형태를 남겼는지 확인 할 수 있습니다. 글로 쓰니 큰 장점처럼 안보이는데, 이 작은 요소가 개인적으로는 생각보다 매우 편리했습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 11.666666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAWUlEQVQI1yXLSw6AIAwAUS5gYoF+aKFF5f5nNMpyknnpACINtpnJpF+Ais3VH9LIZGyzyqgy1J/CHZtj88xdY1UZ6SxyzxWxAHXjvbJNQP2xZ7KNt4cvP/wC1IUL9oix3WAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"해당 화면에서, 탭만 바꾸어 가면서 다 볼 수 있다. (Actions → Rull Request → Issue → Code 등등…)\"\n        title=\"해당 화면에서, 탭만 바꾸어 가면서 다 볼 수 있다. (Actions → Rull Request → Issue → Code 등등…)\"\n        src=\"/static/75c7e85bf31837d7f07f50ca8b696dce/37523/github-action2.png\"\n        srcset=\"/static/75c7e85bf31837d7f07f50ca8b696dce/e9ff0/github-action2.png 180w,\n/static/75c7e85bf31837d7f07f50ca8b696dce/f21e7/github-action2.png 360w,\n/static/75c7e85bf31837d7f07f50ca8b696dce/37523/github-action2.png 720w,\n/static/75c7e85bf31837d7f07f50ca8b696dce/302a4/github-action2.png 1080w,\n/static/75c7e85bf31837d7f07f50ca8b696dce/07a9c/github-action2.png 1440w,\n/static/75c7e85bf31837d7f07f50ca8b696dce/bd9eb/github-action2.png 1442w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>해당 화면에서, 탭만 바꾸어 가면서 다 볼 수 있다. (Actions → Rull Request → Issue → Code 등등…)</p>\n<h4 id=\"cicd-을-위한-설정-코드-관리가-편해진다\" style=\"position:relative;\"><a href=\"#cicd-%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%84%A4%EC%A0%95-%EC%BD%94%EB%93%9C-%EA%B4%80%EB%A6%AC%EA%B0%80-%ED%8E%B8%ED%95%B4%EC%A7%84%EB%8B%A4\" aria-label=\"cicd 을 위한 설정 코드 관리가 편해진다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>“CI/CD 을 위한 설정, 코드 관리가 편해진다”</strong></h4>\n<p>예를 들어 Jenkins을 사용한다고 했을때, 위 workflow에서 할 수 있는 여러가지 일을 한다고하면, Jenkins의 Job 의 각 Step(task)설정에 그러한 여러가지 일들에 대한 설정을 하여야 합니다. 예를 들어 git에서 코드 받기, lint 테스트 돌리기, 빌드 돌리기 등등이 필요하면, 각각의 대한 내용을 Jenkins의 Step(Task)설정에서 하게 되고, 결국 이러한 설정은 Jenkins내부에서 관리되게 됩니다. 이에 반해 github action을 사용하면, 이러한 각 Job(Step, Task)을 동일한 프로젝트 소스코드 <code class=\"language-text\">.git/workflow</code> 에서 같이 관리하게 됩니다.</p>\n<h4 id=\"이미-구현된-수많은-github-actoins\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%AF%B8-%EA%B5%AC%ED%98%84%EB%90%9C-%EC%88%98%EB%A7%8E%EC%9D%80-github-actoins\" aria-label=\"이미 구현된 수많은 github actoins permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>“이미 구현된 수많은 github actoins”</strong></h4>\n<p>물론 다른 CI/CD 툴들 역시 이러한 plugin형태의 기능을 제공하고 있지만, 개인적인 사용경험상 github action쪽의 사용이 훨씬 편하였습니다. 별도의 설치 없이 사용하거나, 설치 역시 <a href=\"https://github.com/marketplace\">marketplace</a> 에서 단순 클릭으로 사용가능한 수준 이었습니다. 좀 과정하여 비교하자면, 어떤 CI/CD 툴은 java지식이 있어야 하고, jar등을 받아서, 직접 본인이 해당 jar을 올려서 설치하는 형태라면… github action은 별도 설치 없어도 “github주소/프로젝트주소@프로젝트ref”(<code class=\"language-text\">{owner}/{repo}@{ref}</code>) 을 통하여 곧바로 사용가능한 형태 입니다.</p>\n<h4 id=\"개발자가-직접-custom-action을-구현하기-쉽다-입니다\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EB%B0%9C%EC%9E%90%EA%B0%80-%EC%A7%81%EC%A0%91-custom-action%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-%EC%89%BD%EB%8B%A4-%EC%9E%85%EB%8B%88%EB%8B%A4\" aria-label=\"개발자가 직접 custom action을 구현하기 쉽다 입니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“개발자가 직접 custom action을 구현하기 쉽다!” 입니다.</h4>\n<p><a href=\"https://docs.github.com/ko/actions/creating-actions/about-custom-actions\">github 에서 가이드</a>하는 형태를 통하여, public github에 개발자가 만든 custom action을 소스코드(github source repository)형태 그대로 구현 및 공유 할 수 있습니다.</p>\n<h4 id=\"장점-요약\" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EC%A0%90-%EC%9A%94%EC%95%BD\" aria-label=\"장점 요약 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>장점 요약</strong></h4>\n<ul>\n<li>github 에서 all in one 처럼 사용하는 사용성.</li>\n<li>CI/CD 역시 코드 관리가 필요한데, 내 소스코드 내부에 <code class=\"language-text\">.git/workflow</code> 에서 같이 관리 가능.</li>\n<li><a href=\"https://github.com/marketplace\">marketplace</a>  을 통하여 제공되는 수많은 이미 구현된 third party actions들이 제공.</li>\n<li>개발자가 custom action을 만들고, 공유하기 쉽다.</li>\n</ul>\n<h3 id=\"단점\" style=\"position:relative;\"><a href=\"#%EB%8B%A8%EC%A0%90\" aria-label=\"단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>단점</h3>\n<p>사용하면서 아주 큰 단점을 발견하지는 못한거 같습니다. github action의 단점이면 사실상 다른 CI/CD툴에서도 비슷한 단점이 있는거 같습니다. 개인적으로 느낌 몇가지 단점을 생각해보자면.</p>\n<ul>\n<li>대규모 프로젝트(enterprise)에서 사용시 유료 사용 필요</li>\n<li>self-hosted runner 사용시 별도의 host 구축(서버구축) 및 관리 필요.</li>\n<li>기존에 사용하던 CI/CD와 다른 새로운 형태(github action)의 설정을 다시 공부해야함(learning curve).</li>\n</ul>\n<p>사실 기존에 이미 CI/CD 사용 경험이 있다면, learning curve 는 생각보다 적습니다. CI/CD에서 사용하는 용어 (Step, Job, Task)나 구동되는 형태등이 비슷합니다. 따라서 단점으로 적어보긴 하였지만, 사실 크게 걱정할 필요없이 조금만 찾아보면, 쉽게 구축하여 사용 가능한 수준입니다.</p>\n<hr>\n<h3 id=\"간략-예제로-찍먹하기\" style=\"position:relative;\"><a href=\"#%EA%B0%84%EB%9E%B5-%EC%98%88%EC%A0%9C%EB%A1%9C-%EC%B0%8D%EB%A8%B9%ED%95%98%EA%B8%B0\" aria-label=\"간략 예제로 찍먹하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>간략 예제로 찍먹하기</h3>\n<p>본 글은 찍먹으로 github action의 모든 요소를 알아보지는 않습니다. 사시 해당 부분은 공식 문서을 참고하시면 됩니다. 다만 찍먹할때 실제 이러한 부분을 통해서 구축한다 정도만 언급하겠습니다.</p>\n<p><strong>미리 설정하여야 하는 것</strong></p>\n<ul>\n<li>\n<p>github의 각 프로젝트 > Settings 탭 > Actions 설정</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAACV0lEQVQ4y21TyZKbMBTkmLEBsUhoAS0ICSRWO7YzSeWSyxySS/L/X5MCnCnPTKq6VCVQv9dq9QswqwuqtB2sXxCVsulNN1k350UltW+6CWKu7XC6fBuXG8hInOJXBPv+GMOnKI8ASnIap3j/CDISJgVCVJW8LBhDNNqOPYXZjiAEKEMlV622A2b1MYYhKEKAouS+RklxiHJc1rY/1XaQjbd+Md1k3LySk5wiImilc8yjpHgUtm8jgEpej8vV+qX1i58u1s3jclvJKWSk0iFAT8f0tdsbAAirnklX8obxphSGVppU+k5mvCGVxqxGRGzK35QIAUR80O5s3Ww2jMsXP17u5EpaN5z9dDGbvSAjr8z7FRKkbT+dn+0mu6AyBOhuWKVa3Y7K9LzuWr8gIsIY7mSQkd18xo0yfSWtbDxmChIR7LWTnIKMJDlNIQsB+njzJKdNOw7LbVhufvo8nZ776bp2hpgr0wvtdkDM/2tbKa1ux9oMQjvj5toOQZSgNGdMrJJU4z+6tSOFzHTTMF/H5dr6uZ8u43INth9ltVWNku1t0+IjOYwh5p3qLqq9yO7aDM+1+xKEAKY5FbWzbsFM7Z0fsUUFp5Ay2WZERRkDkMd5CaAI4owR1SvjhtNNGgcJR1Q8oihVAikT5vuPF9m4MIZxUuwIAKyw8EK30/mZ6xYxUZTyHbKiPPybh0/H9D4Yx2w17Bhla0LLOk7xIczDBL1TfowhZsq6WWgnG6+aNQ7K9OtTISKn89eXX39efv4upT1E+T4SD/FEjDdr/ty8zcZpWG5tf/oL/oRojeeOvvUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github action3\"\n        title=\"github action3\"\n        src=\"/static/a4ba16148aa854e99bfe612f5516912b/37523/github-action3.png\"\n        srcset=\"/static/a4ba16148aa854e99bfe612f5516912b/e9ff0/github-action3.png 180w,\n/static/a4ba16148aa854e99bfe612f5516912b/f21e7/github-action3.png 360w,\n/static/a4ba16148aa854e99bfe612f5516912b/37523/github-action3.png 720w,\n/static/a4ba16148aa854e99bfe612f5516912b/dd104/github-action3.png 1064w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>적용하려는 action의 권한등을 설정합니가.</li>\n<li>Runners같은 경우, 직접 서빙하는 Server을 통해서 Action을 구동할지, 아니면 github이 제공하는 서버를 통해서 Action을 구동할지 설정 할 수 있습니다.\n<ul>\n<li>self-hosted는 사실 Jenkins등을 직접 self-hosted로 구동하여 서빙하는 컨셉하고 비슷합니다.</li>\n<li>workflow의 구동이 해당 서버에서 되고, 그 결과 등도 해당 서버에 저장됩니다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>사용하는 action이 github auth key(github token)가 필요한 경우 auth키 발급 필요</p>\n<ul>\n<li>해당 key는 특정 reposigory쪽에 등록하는 ssh key와는 다른형태로 있습니다.</li>\n<li><a href=\"https://github.com/settings/profile\">https://github.com/settings/profile</a>  하위의 Developer settings 의 Personal accrss tokens 메뉴를 통하여 생성 가능합니다.\n<ul>\n<li>\n<p><a href=\"https://github.com/settings/tokens\">https://github.com/settings/tokens</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 710px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB7ElEQVQoz4WTa2/aMBSG+20aie3E91viBCgpUEIg4Q4t2qbt//+jKvEodKWa9CiyLD86PjmvHxCWHhhzGAuIBcACxAJeAB3wcuyWBxBxEDGIFRZ5zBwkhvCEyZSKhIokpprKlMk0pro7+YFWDhGNeZrPf2flr3T2I8mKenNa78/b48/pfLVYHdf7c9XsQ8TuyL54AHAICYh4AGkPEE+7DnEPkM9mK197IMoTERVTHTMTU42wjLod9HXPFxALIP3e1fzWi3qAfK5259ohpKNJNRpXzea0WB2mZbM9tM33AGl/+H9kxKhICLdCZ9LkXDnrRpjZu63ekZXtp1lRNfvn+WoyqxfNHjMTQBoi5vlSBohFRDHpdDLkykmTC5OT7i6YWSZTzMy70yVKfJCTvHgcz5frYzvk3Wu52DTbl3rzUjWH4/nPfLlrBcSDkGJiIJZX2ScRYcmV4zL1laXpC53FVP/NacQhEdQZbDW4rRxAEiDKlRtNqkFRjmf18Kl8mi4ns5orFyIGYx4iHgnl6qEt+4hIgPgDQG2wbbHl2tnscVA890fTbDBuv8MxU6kwmbT5O0JlUudU2DBiXtbZ7CyNc/2i2ZyW60O53K53r1Wzs26ok/4/mHTAZBoidh2V78rn2cc7gBTevM1b/KjeAD/WWs8l+uLqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github action4\"\n        title=\"github action4\"\n        src=\"/static/6caf47c24e418bacafc0718703c84f77/7131f/github-action4.png\"\n        srcset=\"/static/6caf47c24e418bacafc0718703c84f77/e9ff0/github-action4.png 180w,\n/static/6caf47c24e418bacafc0718703c84f77/f21e7/github-action4.png 360w,\n/static/6caf47c24e418bacafc0718703c84f77/7131f/github-action4.png 710w\"\n        sizes=\"(max-width: 710px) 100vw, 710px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><strong>실제 workflow 설정</strong></p>\n<ul>\n<li>설정 파일은 yml 형태입니다.</li>\n<li>설정 파일은 <code class=\"language-text\">{github-owner}/{:project}/.github/workflows</code> 에 위치합니다.\n<ul>\n<li>즉 내 github 계정이 gseok 이고, project가 action-test 라면</li>\n<li>gseok/action-test/.github/workflows/{:workflow-setting-file.yml} 형태 입니다.</li>\n</ul>\n</li>\n<li>설정파일의 상세 내용은 아래 참고 링크를 참고하세요</li>\n</ul>\n<p><strong>workflow 설정(메타) yml 파일 예제</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"workflow 작업이름\"</span>\n\n# inputs 필드는 optional합니다<span class=\"token punctuation\">.</span>\n# workflow에서 사용할 매개변수 사용시 만들어 씁니다<span class=\"token punctuation\">.</span> 자세한건 공식 문서 참고하세요\n# 참고<span class=\"token operator\">:</span> https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>docs<span class=\"token punctuation\">.</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>ko<span class=\"token operator\">/</span>actions<span class=\"token operator\">/</span>creating<span class=\"token operator\">-</span>actions<span class=\"token operator\">/</span>metadata<span class=\"token operator\">-</span>syntax<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">-</span>github<span class=\"token operator\">-</span>actions#inputs\n<span class=\"token literal-property property\">inputs</span><span class=\"token operator\">:</span>\n  num<span class=\"token operator\">-</span>octocats<span class=\"token operator\">:</span>\n    <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'Number of Octocats'</span>\n    <span class=\"token literal-property property\">required</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">'1'</span>\n  octocat<span class=\"token operator\">-</span>eye<span class=\"token operator\">-</span>color<span class=\"token operator\">:</span>\n    <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'Eye color of the Octocats'</span>\n    <span class=\"token literal-property property\">required</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n\n# on 구분은 해당 workflow가 자동 <span class=\"token function\">구동</span><span class=\"token punctuation\">(</span>trigger<span class=\"token punctuation\">)</span>될 조건이 됩니다<span class=\"token punctuation\">.</span>\n# 즉 일종의 event listener 라고 이해해도 됩니다<span class=\"token punctuation\">.</span>\n# 아래는 develop브랜치에 push가 발생하거나<span class=\"token punctuation\">,</span> 아무태그나 태그가 push 되면 workflow 가 구동됩니다<span class=\"token punctuation\">.</span>\n# 이외에도<span class=\"token punctuation\">,</span> 이슈 생성<span class=\"token punctuation\">,</span> pull<span class=\"token operator\">-</span>request<span class=\"token punctuation\">,</span> comment등 여러 조건에 따른 workflow trigger 설정이 가능합니다<span class=\"token punctuation\">.</span>\n# 참고<span class=\"token operator\">:</span> https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>docs<span class=\"token punctuation\">.</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>ko<span class=\"token operator\">/</span>actions<span class=\"token operator\">/</span>using<span class=\"token operator\">-</span>workflows<span class=\"token operator\">/</span>triggering<span class=\"token operator\">-</span>a<span class=\"token operator\">-</span>workflow\n<span class=\"token literal-property property\">on</span><span class=\"token operator\">:</span>\n  <span class=\"token literal-property property\">push</span><span class=\"token operator\">:</span>\n    <span class=\"token literal-property property\">tags</span><span class=\"token operator\">:</span>\n      <span class=\"token operator\">-</span> <span class=\"token string\">'*'</span>\n    <span class=\"token literal-property property\">branches</span><span class=\"token operator\">:</span> develop\n\n# workflow에서 구동할 <span class=\"token function\">Job</span><span class=\"token punctuation\">(</span>작업<span class=\"token punctuation\">)</span>을 생성 가능합니다<span class=\"token punctuation\">.</span>\n# jobs<span class=\"token operator\">:</span> 바로 하위의 이름은 직접 생성하면됩니다<span class=\"token punctuation\">.</span> 아래 <span class=\"token function\">예시는</span> <span class=\"token punctuation\">(</span>build<span class=\"token operator\">-</span>lib<span class=\"token punctuation\">)</span>이라는 이름의 job을 만들었습니다<span class=\"token punctuation\">.</span>\n# 종속적인 <span class=\"token function\">형태</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span>번 job이 먼저 완료되어야 <span class=\"token number\">2</span>번 job구동<span class=\"token punctuation\">)</span>도 가능합니다<span class=\"token punctuation\">.</span> <span class=\"token punctuation\">(</span>needs키워드 사용<span class=\"token punctuation\">)</span>\n# 참고<span class=\"token operator\">:</span> https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>docs<span class=\"token punctuation\">.</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>ko<span class=\"token operator\">/</span>actions<span class=\"token operator\">/</span>using<span class=\"token operator\">-</span>jobs<span class=\"token operator\">/</span>using<span class=\"token operator\">-</span>jobs<span class=\"token operator\">-</span><span class=\"token keyword\">in</span><span class=\"token operator\">-</span>a<span class=\"token operator\">-</span>workflow\n<span class=\"token literal-property property\">jobs</span><span class=\"token operator\">:</span>\n  build<span class=\"token operator\">-</span>lib<span class=\"token operator\">:</span>\n\n    # workflow에서 작업을 처리할 실행기 <span class=\"token operator\">-</span> <span class=\"token function\">컴퓨터</span><span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">)</span>을 지정합니다<span class=\"token punctuation\">.</span>\n    # self<span class=\"token operator\">-</span>hosted을 사용시 직접 해당 <span class=\"token function\">컴퓨터</span><span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">)</span>을 구축하고\n    # github의 각 프로젝트 <span class=\"token operator\">></span> Settings 탭 <span class=\"token operator\">></span> Actions 설정 을 통하여 해당 <span class=\"token function\">컴퓨터</span><span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">)</span>가 등록되어 있어야 합니다<span class=\"token punctuation\">.</span>\n    # github이 직접 제공하는 실행기 사용도 가능합니다<span class=\"token punctuation\">.</span>\n    # 참고<span class=\"token operator\">:</span> https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>docs<span class=\"token punctuation\">.</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>ko<span class=\"token operator\">/</span>actions<span class=\"token operator\">/</span>using<span class=\"token operator\">-</span>jobs<span class=\"token operator\">/</span>choosing<span class=\"token operator\">-</span>the<span class=\"token operator\">-</span>runner<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">-</span>a<span class=\"token operator\">-</span>job\n    runs<span class=\"token operator\">-</span>on<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> self<span class=\"token operator\">-</span>hosted <span class=\"token punctuation\">]</span>\n\n\n    # 조건이나<span class=\"token punctuation\">,</span> 행렬 등을 이용하여<span class=\"token punctuation\">,</span> 최종 steps에서 실제 구동될 부분에 대한 컨트롤이 가능합니다<span class=\"token punctuation\">.</span>\n    # 아래 예시에는 node<span class=\"token operator\">-</span>version이 하나만 있는데 만약<span class=\"token punctuation\">,</span> 해당 부분이 <span class=\"token punctuation\">[</span><span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">]</span> 이라면\n    # 별도 설정없이 총 <span class=\"token number\">3</span>개의 작업 node <span class=\"token number\">12</span><span class=\"token punctuation\">,</span> node <span class=\"token number\">16</span><span class=\"token punctuation\">,</span> node <span class=\"token number\">18</span> 이 구동됩니다<span class=\"token punctuation\">.</span>\n    # 참고<span class=\"token operator\">:</span> https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>docs<span class=\"token punctuation\">.</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>ko<span class=\"token operator\">/</span>actions<span class=\"token operator\">/</span>using<span class=\"token operator\">-</span>jobs<span class=\"token operator\">/</span>using<span class=\"token operator\">-</span>a<span class=\"token operator\">-</span>matrix<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">-</span>your<span class=\"token operator\">-</span>jobs\n    <span class=\"token literal-property property\">strategy</span><span class=\"token operator\">:</span>\n      <span class=\"token literal-property property\">matrix</span><span class=\"token operator\">:</span>\n        node<span class=\"token operator\">-</span>version<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">18.13</span><span class=\"token number\">.0</span><span class=\"token punctuation\">]</span>\n\n    # 해당 Job에서 실행될 각각의 Step을 생성합니다<span class=\"token punctuation\">.</span>\n    # 각각의 step은 각각의 process로 구동됩니다<span class=\"token punctuation\">.</span>\n    # 참고<span class=\"token operator\">:</span> https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>docs<span class=\"token punctuation\">.</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>ko<span class=\"token operator\">/</span>actions<span class=\"token operator\">/</span>using<span class=\"token operator\">-</span>workflows<span class=\"token operator\">/</span>workflow<span class=\"token operator\">-</span>syntax<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">-</span>github<span class=\"token operator\">-</span>actions#jobsjob_idsteps\n    <span class=\"token literal-property property\">steps</span><span class=\"token operator\">:</span>\n\n    # 참고<span class=\"token operator\">:</span> https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>docs<span class=\"token punctuation\">.</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>ko<span class=\"token operator\">/</span>actions<span class=\"token operator\">/</span>using<span class=\"token operator\">-</span>workflows<span class=\"token operator\">/</span>workflow<span class=\"token operator\">-</span>syntax<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">-</span>github<span class=\"token operator\">-</span>actions#jobsjob_idstepsuses\n    <span class=\"token operator\">-</span> name<span class=\"token operator\">:</span> Code checkout        # step의 이름입니다<span class=\"token punctuation\">.</span>\n      # uses을 사용하면<span class=\"token punctuation\">,</span> 외부 레파지토리등에 존재하는 action<span class=\"token punctuation\">.</span>yml을 통해서 step action을 구동가능합니다<span class=\"token punctuation\">.</span>\n      <span class=\"token literal-property property\">uses</span><span class=\"token operator\">:</span> actions<span class=\"token operator\">/</span>checkout@v3  # 해당 step에서 구동할 재사용가능한 action입니다\n\n    <span class=\"token operator\">-</span> name<span class=\"token operator\">:</span> Use Node<span class=\"token punctuation\">.</span>js $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix<span class=\"token punctuation\">.</span>node<span class=\"token operator\">-</span>version <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token literal-property property\">uses</span><span class=\"token operator\">:</span> actions<span class=\"token operator\">/</span>setup<span class=\"token operator\">-</span>node@v3\n      <span class=\"token keyword\">with</span><span class=\"token operator\">:</span>\n        node<span class=\"token operator\">-</span>version<span class=\"token operator\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix<span class=\"token punctuation\">.</span>node<span class=\"token operator\">-</span>version <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\n    # 참고<span class=\"token operator\">:</span> https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>docs<span class=\"token punctuation\">.</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>ko<span class=\"token operator\">/</span>actions<span class=\"token operator\">/</span>using<span class=\"token operator\">-</span>workflows<span class=\"token operator\">/</span>workflow<span class=\"token operator\">-</span>syntax<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">-</span>github<span class=\"token operator\">-</span>actions#jobsjob_idstepsrun\n    <span class=\"token operator\">-</span> name<span class=\"token operator\">:</span> Build\n      # run을 사용하면<span class=\"token punctuation\">,</span> cli 형태의 명령어를 구동할 수 있습니다<span class=\"token punctuation\">.</span>\n      <span class=\"token literal-property property\">run</span><span class=\"token operator\">:</span> <span class=\"token operator\">|</span>\n        npm install <span class=\"token operator\">-</span>g yarn@<span class=\"token number\">1.22</span><span class=\"token number\">.19</span>\n        yarn install\n        yarn build<span class=\"token operator\">:</span>client<span class=\"token operator\">:</span>real\n\n    # 참고<span class=\"token operator\">:</span> https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>docs<span class=\"token punctuation\">.</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>ko<span class=\"token operator\">/</span>actions<span class=\"token operator\">/</span>using<span class=\"token operator\">-</span>workflows<span class=\"token operator\">/</span>workflow<span class=\"token operator\">-</span>syntax<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">-</span>github<span class=\"token operator\">-</span>actions#jobsjob_idstepswith\n    <span class=\"token operator\">-</span> name<span class=\"token operator\">:</span> Upload binaries to release\n      <span class=\"token literal-property property\">uses</span><span class=\"token operator\">:</span> svenstaro<span class=\"token operator\">/</span>upload<span class=\"token operator\">-</span>release<span class=\"token operator\">-</span>action@v2\n      # <span class=\"token keyword\">with</span>을 사용하면<span class=\"token punctuation\">,</span> 위 uses의 action구동시 <span class=\"token function\">필요한</span><span class=\"token punctuation\">(</span>정의된 inputs <span class=\"token operator\">-</span> 매개변수<span class=\"token punctuation\">)</span>변수에 값을 전달\n      # 하면서 action을 구동할 수 있습니다<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">with</span><span class=\"token operator\">:</span>\n        <span class=\"token literal-property property\">repo_token</span><span class=\"token operator\">:</span> my_github_token\n        <span class=\"token literal-property property\">file</span><span class=\"token operator\">:</span> dist<span class=\"token operator\">/</span>my<span class=\"token operator\">-</span>build<span class=\"token operator\">-</span>result<span class=\"token punctuation\">.</span>zip\n        <span class=\"token literal-property property\">asset_name</span><span class=\"token operator\">:</span> my<span class=\"token operator\">-</span>build<span class=\"token operator\">-</span>result<span class=\"token punctuation\">.</span>zip\n        <span class=\"token literal-property property\">tag</span><span class=\"token operator\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> github<span class=\"token punctuation\">.</span>ref <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h3>\n<p>github action에 대하여 간략하게 찍먹형태로 알아보았습니다. 서두에 이야기한것처럼 현재 github을 사용중인데, 프로젝트에 새롭게 CI/CD을 구축해야 하는경우, 도입을 고민해볼만한 좋은 기능인듯 합니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li>github action 공식 홈페이지 - <a href=\"https://github.com/features/actions\">https://github.com/features/actions</a></li>\n<li>github action 공식 문서\n<ul>\n<li><a href=\"https://docs.github.com/en/actions\">https://docs.github.com/en/actions</a></li>\n<li><a href=\"https://docs.github.com/ko/actions/learn-github-actions/understanding-github-actions\">https://docs.github.com/ko/actions/learn-github-actions/understanding-github-actions</a></li>\n</ul>\n</li>\n<li>github action 설정\n<ul>\n<li><a href=\"https://docs.github.com/ko/actions/using-workflows/workflow-syntax-for-github-actions\">https://docs.github.com/ko/actions/using-workflows/workflow-syntax-for-github-actions</a></li>\n<li><a href=\"https://docs.github.com/ko/actions/creating-actions/metadata-syntax-for-github-actions\">https://docs.github.com/ko/actions/creating-actions/metadata-syntax-for-github-actions</a></li>\n<li><a href=\"https://docs.github.com/ko/actions/using-workflows/triggering-a-workflow\">https://docs.github.com/ko/actions/using-workflows/triggering-a-workflow</a></li>\n<li><a href=\"https://docs.github.com/ko/actions/using-jobs/using-jobs-in-a-workflow\">https://docs.github.com/ko/actions/using-jobs/using-jobs-in-a-workflow</a></li>\n<li><a href=\"https://docs.github.com/ko/actions/using-jobs/choosing-the-runner-for-a-job\">https://docs.github.com/ko/actions/using-jobs/choosing-the-runner-for-a-job</a></li>\n<li><a href=\"https://docs.github.com/ko/actions/using-jobs/using-a-matrix-for-your-jobs\">https://docs.github.com/ko/actions/using-jobs/using-a-matrix-for-your-jobs</a></li>\n<li><a href=\"https://docs.github.com/ko/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepsuses\">https://docs.github.com/ko/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepsuses</a></li>\n<li><a href=\"https://docs.github.com/ko/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepsrun\">https://docs.github.com/ko/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepsrun</a></li>\n<li><a href=\"https://docs.github.com/ko/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepswith\">https://docs.github.com/ko/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepswith</a></li>\n</ul>\n</li>\n<li>github action marketplace\n<ul>\n<li><a href=\"https://github.com/marketplace\">https://github.com/marketplace</a></li>\n</ul>\n</li>\n<li>github action 가격\n<ul>\n<li><a href=\"https://github.com/features/packages#pricing\">https://github.com/features/packages#pricing</a></li>\n<li><a href=\"https://docs.github.com/en/billing/managing-billing-for-github-actions/about-billing-for-github-actions\">https://docs.github.com/en/billing/managing-billing-for-github-actions/about-billing-for-github-actions</a></li>\n<li><a href=\"https://github.com/pricing/calculator?feature=actions\">https://github.com/pricing/calculator?feature=actions</a></li>\n</ul>\n</li>\n<li>github api - <a href=\"https://docs.github.com/en/rest\">https://docs.github.com/en/rest</a></li>\n</ul>","excerpt":"github action 찍먹하기 github action 소개 최근 간략한 신규 프로젝트를 진행하면서, 별도의 CI/CD 대신 github action을 통해서 CI/CD 의 기능을 구현해보았는데, 생각보다 편리하고 쓸만하여, github action에 대하여 찍먹하기 정리를 해보았습니다. github action 이란? github 에서 제공하는 workflow feature입니다. github의 공식 홈페이지에서 이를 통하여 결국 CI/CD 의 기능을 할 수 있다고 소개하고 있습니다.  사실 CI/CD 라고 했을때 Jenkins, Travis CI, CirCleCI 등등 와 같은 여러 툴들이 이미 존재하고, 이미 수많은 프로젝트에서 해당 툴들을 사용하고 있습니다. 결론부터 이야기 하자면, 이미 만들어진 바퀴를 또 발명할 필요가 없듯, 이미 잘 사용하고 있고, 탄탄하게 구축된 CI/CD 가 있다면, 굳이 github action을 쓰지 않아도 됩니다. 하지만 신규 프로젝트이고 …","frontmatter":{"date":"March 10, 2023","title":"github action 찍먹하기","categories":"tech-talk","author":"gseok","emoji":null},"fields":{"slug":"/tech-talk-2023/2023-03-10-github-action/"}},"next":{"id":"c5f48b68-b05a-5239-918e-2ccf2b2f68f5","html":"<h3 id=\"소개\" style=\"position:relative;\"><a href=\"#%EC%86%8C%EA%B0%9C\" aria-label=\"소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>소개</h3>\n<p>bun(bunjs, bun.sh) v0.3.0 릴리즈</p>\n<p>2022-07 베타 이후 4개월 만에 v0.3.0이 릴리즈 되었네요. 4개월전에 보고 12월(연말) 이여서 진행되는거 있나? 하고 보았더니, 최근에 v0.3.0 이 릴리즈 되었습니다. 정확하게는 2022-12-07 릴리즈 문서가 작성된거 같습니다.</p>\n<p><a href=\"https://bun.sh/blog/bun-v0.3.0\">bunjs의 릴리즈 글</a>을 보고 내용을 작성했습니다.</p>\n<p><a href=\"https://gseok.github.io/tech-talk-2022/2022-08-15-Bunjs/\">bun 소개는 이전 소개글</a>을 참고하세요.</p>\n<h3 id=\"주요-변경-사항\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD-%EC%82%AC%ED%95%AD\" aria-label=\"주요 변경 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주요 변경 사항</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRElEQVQoz2NgoApgZmYWERaRFJcQEhLi5+cXEhJiZmYmVjMTE5OcooKihoqmtpaWlpaRkZGoqCgPDw8/Pz8rKys+nZycnJLiEqkmXjWWUSo8EgwMDIwMjExMTMzMzIyMIAZEGSMjIxbNklJSulraM1Kqt+dPCrZ2V1BR0tTQ5OPjgzsKog3EYGBEd7CysrKamlpeYWFZbVV9Y0Nra2tff5+KigoDAwMLCwsrKysLCwsTGKBohhgpISGho6NTU1Xd2dHR2tLa0tLS2NjY29sbFRWF7FpmJmYsLufh4VFUVCwtLW1ubq6vr29oaKivr29tbS0uLvb19Q0MDIyIiHBzc4N7Hj3A5OTkIiMjk5KSUlJSkpOTExISkpOTU1NTMzMz8/LySkpKYmJiODg4mBiZyEwLrKys2C1nZGRkBgNIwGAyMLUBAIe+PYKv7N7gAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"출처: https://bun.sh/v0.3.0.png\"\n        title=\"출처: https://bun.sh/v0.3.0.png\"\n        src=\"/static/b3e52edaf746b837aedb3892b923ff57/37523/bun-v0.3.0.png\"\n        srcset=\"/static/b3e52edaf746b837aedb3892b923ff57/e9ff0/bun-v0.3.0.png 180w,\n/static/b3e52edaf746b837aedb3892b923ff57/f21e7/bun-v0.3.0.png 360w,\n/static/b3e52edaf746b837aedb3892b923ff57/37523/bun-v0.3.0.png 720w,\n/static/b3e52edaf746b837aedb3892b923ff57/302a4/bun-v0.3.0.png 1080w,\n/static/b3e52edaf746b837aedb3892b923ff57/07a9c/bun-v0.3.0.png 1440w,\n/static/b3e52edaf746b837aedb3892b923ff57/bf286/bun-v0.3.0.png 1688w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>출처: <a href=\"https://bun.sh/v0.3.0.png\">https://bun.sh/v0.3.0.png</a></p>\n<p>Bun은 기존 철학과 마찬가지로, 최상위 우선순위로, 안정성과 호환성(node.js 와 web 양쪽 api) 위주로 업데이트가 진행되고 있다고 합니다.</p>\n<p>그중에서도 이번 0.3.0 에서는 메모리 사용을 많이 줄였는데, 메모리 사용양을 줄인 부분을 크게 강조하고 있습니다. 실제 node.js 서버 대신 deno서버 구현하여 서비스 사용하고 있는 부분이 있는데, 실제로도 node보다 deno가 메모리를 많이 먹습니다. Bun 0.2.0 까지는 메모리를 그보다 더 많이 사용했는데 이번에 확실하게 줄였나 봅니다.</p>\n<h3 id=\"bunjs-버전-업데이트-방법\" style=\"position:relative;\"><a href=\"#bunjs-%EB%B2%84%EC%A0%84-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%EB%B0%A9%EB%B2%95\" aria-label=\"bunjs 버전 업데이트 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bun.js 버전 업데이트 방법</h3>\n<p>To install:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">curl <span class=\"token operator\">-</span>fsSL https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>bun<span class=\"token punctuation\">.</span>sh<span class=\"token operator\">/</span>install <span class=\"token operator\">|</span> bash</code></pre></div>\n<p>To upgrade:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">bun upgrade</code></pre></div>\n<h3 id=\"주요-안정성-업데이트\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9A%94-%EC%95%88%EC%A0%95%EC%84%B1-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8\" aria-label=\"주요 안정성 업데이트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주요 안정성 업데이트</h3>\n<ul>\n<li>\n<p><a href=\"https://twitter.com/jarredsumner/status/1598360859650113536\">3 ~ 5x 더 적은 메모리</a> 사용.</p>\n<ul>\n<li>벤치마크 사용 코드: <a href=\"https://github.com/oven-sh/bun/commit/31f025fa02c1c206944effe4395c841fc9e6b2fb\">https://github.com/oven-sh/bun/commit/31f025fa02c1c206944effe4395c841fc9e6b2fb</a></li>\n</ul>\n</li>\n<li>\n<p><strong><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Console/log\">console.log()</a></strong> 함수 개선.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoUlEQVQoz32SWW7bMABEfQ9xFXdxkyjJ1GLFsZwGbQMU6f0vU8h23RSNC8wHf4YzfMMdwhRADAoIAAKIFJAAiBEmCNNNpNx0Pf+jHUTYpFQfj6bv21jvU6OahkoFAIKIbIIYIvK5GWGyPD2tX7/l80ve52Pqxj4zUwkfhA9MGxki1xV+kExs2/anNQ1j26S6a0POxnrCOOWClJxySUr+MHk+Lt/ff779eJ/Xc+h7b6qgKwgxAAghgi7l0cNkF06nc59HP47VMDDvdc6m7Zg26IHtZgYQV9afX17HeXH93s2zHYawLH6edUq8svhK+4r9b/ib2Vo/TXN3ODSHWbetHbJwjlnLjOXWQUgAwABi+Fv3OptZGbt8easPz836Gg/Pflqa4+r2E5eqakKVauWdrqOMtQhR1k2pbs/ZYVKWpZAuKd/K0DLtpa117EzsVKVS9rGzMRnjDWGCcnmBz/4Ac13nx0H5EK0LMYgYqRBFASAiBcAFwJfa5PZnPiDcAYj206h9TYUUQnIhqVSYXYYlFH/QpzvTO4bbxZAgRP+z0N38C2qRdL/i7dZXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"출처: https://user-images.githubusercontent.com/709451/206131955-1678c2ba-b3ca-4294-ae81-ad39e05e73c5.png\"\n        title=\"출처: https://user-images.githubusercontent.com/709451/206131955-1678c2ba-b3ca-4294-ae81-ad39e05e73c5.png\"\n        src=\"/static/b7ed5d88f576bb0b719adfc734ea892a/37523/bun-v0.3.0-console.png\"\n        srcset=\"/static/b7ed5d88f576bb0b719adfc734ea892a/e9ff0/bun-v0.3.0-console.png 180w,\n/static/b7ed5d88f576bb0b719adfc734ea892a/f21e7/bun-v0.3.0-console.png 360w,\n/static/b7ed5d88f576bb0b719adfc734ea892a/37523/bun-v0.3.0-console.png 720w,\n/static/b7ed5d88f576bb0b719adfc734ea892a/00d43/bun-v0.3.0-console.png 1000w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>출처: <a href=\"https://user-images.githubusercontent.com/709451/206131955-1678c2ba-b3ca-4294-ae81-ad39e05e73c5.png\">https://user-images.githubusercontent.com/709451/206131955-1678c2ba-b3ca-4294-ae81-ad39e05e73c5.png</a></p>\n</li>\n<li>\n<p>text encoding 관련 일부 버그 수정 및  <strong><a href=\"https://github.com/simdutf/simdutf\">simdutf</a> 라이브러리 사용하여</strong> <strong><a href=\"https://twitter.com/jarredsumner/status/1598510404686450688\">3x</a> 빠른<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder/encodeInto\">TextEncoder.encodeInto()</a> 적용</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWUlEQVQoz4WR62rkMAyF5z06sWJblm35EtvxzKS0nQylC33/J1qSsKV/toWDkAQS+o5OoHR/e3n9+LN+fl4fj9z6bbkTR9LGaSNADv/XSYwqplznPvdLmiqFaGOyMaNGLfUgxrMYB5BH/EqOeAKpa+tpKmcxkuOUC4cEUg+gjGMfEscMUjsOUhtjPTmmvf80wDY81TaVhoZKcjknzoVSNhytjzEU5ozkjPXaWHKsjTXWK6SzGE+g9O3xmNe1rWu739PUXtqzkvj0786fmeVUa6ottTmUZqxnsmisGNVZbGzfIY/yq7kZxjE7jgIkGuc5EQdQegCpkJAckhtA6n2dQqOQFJKxfj9b6n5dLsszkq0ltT5PdSYOFCLHXEvPU0PrOG7kPkTrN7fI8cGMy/t7vi35es2XzpxauUkkoTSMm8SodskjGUCK78ycMigEhUKhGNX+px0PfvHsL+USWVCtKSfvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"출처: https://user-images.githubusercontent.com/3238291/205817178-bf25dcea-6b6f-487b-bdf1-6728f0e4aec1.png\"\n        title=\"출처: https://user-images.githubusercontent.com/3238291/205817178-bf25dcea-6b6f-487b-bdf1-6728f0e4aec1.png\"\n        src=\"/static/ee67a4af66fe8c631784730be88a509e/37523/bun-v0.3.0-textencoder.png\"\n        srcset=\"/static/ee67a4af66fe8c631784730be88a509e/e9ff0/bun-v0.3.0-textencoder.png 180w,\n/static/ee67a4af66fe8c631784730be88a509e/f21e7/bun-v0.3.0-textencoder.png 360w,\n/static/ee67a4af66fe8c631784730be88a509e/37523/bun-v0.3.0-textencoder.png 720w,\n/static/ee67a4af66fe8c631784730be88a509e/302a4/bun-v0.3.0-textencoder.png 1080w,\n/static/ee67a4af66fe8c631784730be88a509e/712f7/bun-v0.3.0-textencoder.png 1181w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>출처: <a href=\"https://user-images.githubusercontent.com/3238291/205817178-bf25dcea-6b6f-487b-bdf1-6728f0e4aec1.png\">https://user-images.githubusercontent.com/3238291/205817178-bf25dcea-6b6f-487b-bdf1-6728f0e4aec1.png</a></p>\n</li>\n<li>\n<p>다양한 리눅스 환경에서의 Bun 구동 보장, 이전 버전에서는 Amazon Linux 2 와 같은 VM내에서 미구동 되었는데 현재 지원됨, 이전에 다음과 같은 에러 났었는데 이제 에러 없이 구동된다. (“version ‘GLIBC_2.29’ not found”)</p>\n</li>\n<li>\n<p>그외 다양한 업데이트 적용</p>\n<ul>\n<li>Increased test coverage for <strong><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/fetch\">fetch()</a></strong>, <strong><a href=\"https://github.com/oven-sh/bun#bunspawn--spawn-a-process\">Bun.spawn()</a></strong> and <strong><a href=\"https://github.com/oven-sh/bun#bunspawn--spawn-a-process\">Bun.spawnSync()</a></strong>, streaming files, and much more</li>\n<li>Improved the bindings between JavaScriptCore and Zig, which has led to <strong><a href=\"https://github.com/oven-sh/bun/commit/d6d04cab2415b662e1a1a9ce937fa42bfb33d823\">many</a></strong> <strong><a href=\"https://github.com/oven-sh/bun/commit/ee939f7a6dbe3571cf17b4b8135edff5f2497b48\">garbage-collector</a></strong> <strong><a href=\"https://github.com/oven-sh/bun/commit/17e8181b4ec760bea8acdd2f25c3dec3c693be50\">related</a></strong> <strong><a href=\"https://github.com/oven-sh/bun/commit/7c7769a7c7db3b7932a2726adb9d64e011c1bed6\">crashes</a></strong> <strong><a href=\"https://github.com/oven-sh/bun/commit/38b5a85d8ae030acdead6d169735317a66d23d94\">being</a></strong> <strong><a href=\"https://github.com/oven-sh/bun/commit/88ca7fd73854758f9019722d3d491e599af354e8\">fixed</a></strong></li>\n<li>Fixed various issues when using <strong><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API\">WebCrypto</a></strong></li>\n<li>Fixed encoding and compression issues with <strong><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/fetch\">fetch()</a></strong></li>\n<li>Fixed a data corruption bug in <strong><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/fetch\">fetch()</a></strong></li>\n<li>Fixed a crash when async code was run within <strong><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/setTimeout\">setTimeout()</a></strong></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"nodejs-호환성-추가\" style=\"position:relative;\"><a href=\"#nodejs-%ED%98%B8%ED%99%98%EC%84%B1-%EC%B6%94%EA%B0%80\" aria-label=\"nodejs 호환성 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Node.js 호환성 추가</h3>\n<p>다음 node.js api 들이 더 추가 되었다고 합니다.</p>\n<ul>\n<li><strong><a href=\"https://nodejs.org/api/child_process.html#child-process\">node:child_process</a></strong></li>\n<li><strong><a href=\"https://nodejs.org/api/process.html#processstdout\">process.stdout</a></strong>, <strong><a href=\"https://nodejs.org/api/process.html#processstderr\">process.stderr</a></strong>, and <strong><a href=\"https://nodejs.org/api/process.html#processstdin\">process.stdin</a></strong></li>\n<li><strong><a href=\"https://v8.dev/docs/stack-trace-api#stack-trace-collection-for-custom-exceptions\">Error.captureStackTrace()</a></strong> (ported from V8 to WebKit)</li>\n<li><strong><a href=\"https://nodejs.org/api/fs.html#fscreatewritestreampath-options\">fs.createWriteStream()</a></strong> and <strong><a href=\"https://nodejs.org/api/fs.html#fscreatereadstreampath-options\">fs.createReadStream()</a></strong></li>\n<li><strong><a href=\"https://nodejs.org/api/process.html#processrelease\">process.release</a></strong></li>\n</ul>\n<h3 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h3>\n<p>위 내용 이외 개선되거나 새롭게 추가된 API 들도 있고, <a href=\"https://bun.sh/blog/bun-v0.3.0#automatic-package-installs-from-npm\">npm package 을 자동 인스톨</a> 해주는 기능이나, <a href=\"https://bun.sh/blog/bun-v0.3.0#filesystemrouter\">FileSystemRouter</a> 추가 등 많은 부분이 개선 &#x26; 추가 된거 같습니다.</p>\n<p>전체적으로 보면, 처음 릴리즈 이후 활발하게 프로젝트가 진행되고 있고, 앞으로의 진행을 유심히 followup 할만한 프로젝트 같습니다. 아직까지는 1.0.0 정식 release가 되면 한번 써볼만한 프로젝트 인듯 합니다. 정말로 node나 deno의 js 런타임을 대체하고 대세가 될 수 있을지! 관전 포인트가 쏠쏠 하네요!</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li>공식\n<ul>\n<li><a href=\"https://bun.sh/\">https://bun.sh/</a></li>\n<li><a href=\"https://github.com/oven-sh/bun#Reference\">https://github.com/oven-sh/bun#Reference</a></li>\n</ul>\n</li>\n<li>릴리즈 문서 - <a href=\"https://bun.sh/blog/bun-v0.3.0\">https://bun.sh/blog/bun-v0.3.0</a></li>\n<li>github 릴리즈 - <a href=\"https://github.com/oven-sh/bun/releases\">https://github.com/oven-sh/bun/releases</a></li>\n</ul>","frontmatter":{"date":"December 15, 2022","title":"bun v0.3.0 릴리즈","categories":"tech-talk","author":"gseok","emoji":null},"fields":{"slug":"/tech-talk-2022/2022-12-15-bun-0.3.0/"}},"prev":{"id":"101a0567-7898-579f-b95f-ecd37c36cf27","html":"<h3 id=\"docker-multi-stage-multiple-from-구문-활용하기\" style=\"position:relative;\"><a href=\"#docker-multi-stage-multiple-from-%EA%B5%AC%EB%AC%B8-%ED%99%9C%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"docker multi stage multiple from 구문 활용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>docker multi stage, multiple from 구문 활용하기</h3>\n<p>single dockerfile을 사용하여 여러가지 환경을 구축하고 있다가, <a href=\"http://blog.alexellis.io/mutli-stage-docker-builds/\">Multi-stage builds in Docker</a> 라고하는 기법을 알게 되었습니다. 이를 활용하여 다단계 형태의 dockerfile 의 활용을 통하여, 좀더 compact한 dockerfile관리 및 사용을 적용하였습니다.</p>\n<p><a href=\"http://blog.alexellis.io/mutli-stage-docker-builds/\">Multi-stage builds in Docker</a>  링크의 경우, 빌드 스텝과, 빌드 결과를 사용(활용) 하는 것을 docker의 multiple from 구문을 활용하여 작성한 예시를 보여줍니다. 필자의 경우 이런 형태는 아니고, docker로 만드는 최종 목적이, 기본적인 프로젝트 구동 환경(node, python, nvm)이었는데, 해당 환경을 어떻게 docker multiple from 을 통하여 수정하였는지 예시를 들어 보겠습니다.</p>\n<h3 id=\"들어가기-전에\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84%EC%97%90\" aria-label=\"들어가기 전에 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가기 전에</h3>\n<p>가장 핵심이 되는 요소를 들어가기 전에 이야기 하겠습니다.</p>\n<blockquote>\n<p>A. Dockerfile 내부에, 여러개의 From 구문이 있을때, docker build을 통하여 생성하는 최종 docker image는 마지막 From 구문의 image 을  base로 생성됩니다.</p>\n</blockquote>\n<blockquote>\n<p>B. Dockerfile 내부에, 여러개의 From 구문이 있을때, 각 From 구문에 AS 구문을 통하여 별칭 사용이 가능합니다.</p>\n</blockquote>\n<blockquote>\n<p>C. Dockerfile 내부에, 여러개의 From 구문이 있을때, 각 Form 구문에 해당하는 이미지 내부의 명령어(RUN)사용이 가능합니다.</p>\n</blockquote>\n<blockquote>\n<p>D. Dockerfile 내부에, 여러개의 From 구문이 있을때, 각 From 구문에 해당하는 이미지의 file을 COPY을 통하여 가져올 수 있습니다.</p>\n</blockquote>\n<p>아래는 위 내용의 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token comment\"># as 구문을 통하여 별칭 지정 가능</span>\n<span class=\"token instruction\"><span class=\"token keyword\">FROM</span> python:2.7.18 <span class=\"token keyword\">AS</span> py</span>\n\n<span class=\"token comment\"># 특정 이미지의 명령어 사용 가능</span>\n<span class=\"token instruction\"><span class=\"token keyword\">FROM</span> node-nvm:18.13.0 <span class=\"token keyword\">AS</span> nd</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> npm run build:project</span>\n\n<span class=\"token comment\"># 바탕이 되는 기본 이미지는 ubuntu (최종 목적 이미지)</span>\n<span class=\"token instruction\"><span class=\"token keyword\">FROM</span> ubuntu:20.04</span>\n\n<span class=\"token comment\"># python 설치 복사 - 최종 목적 이미지에 python이 복사됨(설치됨!)</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">py</span></span> /usr/local/bin /usr/local/bin</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">py</span></span> /usr/local/lib /usr/local/lib</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">py</span></span> /usr/local/include /usr/local/include</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> PYTHONHOME=/usr/local/python</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> PYTHONPATH=/usr/local/lib/python2.7</span>\n\n<span class=\"token comment\"># node 설치 복사 - 최종 목적 이미지에 node가 복사됨(설치됨!)</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">nd</span> <span class=\"token property\">--chown</span><span class=\"token punctuation\">=</span><span class=\"token string\">user1:user1</span></span> /home/user1/.nvm /home/user1/.nvm</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">nd</span> <span class=\"token property\">--chown</span><span class=\"token punctuation\">=</span><span class=\"token string\">user1:user1</span></span> /home/user1/.npm /home/user1/.npm</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> NVM_DIR=/home/user1/.nvm</span>\n\n<span class=\"token comment\"># 본 Dockerfile을 build하여 생성하는 이미지는</span>\n<span class=\"token comment\"># ubuntu기반에, python와 node(nvm)이 설치된 이미지가 된다.</span>\n<span class=\"token instruction\"><span class=\"token keyword\">CMD</span> [<span class=\"token string\">\"node\"</span>]</span></code></pre></div>\n<h3 id=\"기존-방법\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EC%A1%B4-%EB%B0%A9%EB%B2%95\" aria-label=\"기존 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기존 방법</h3>\n<p>기존에는 하나의 docker파일에서 모든걸 다 설치하는 형태를 취하고 있었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> ubuntu:20.04</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">ARG</span> NODE_VERSION=18.13.0</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ARG</span> PM2_VERSION=5.2.2</span>\n\n<span class=\"token comment\"># upgrade</span>\n<span class=\"token instruction\"><span class=\"token keyword\">USER</span> root</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> apt-get update &amp;&amp; apt-get upgrade -y &amp;&amp; apt-get install -y build-essential zlib1g-dev libcurl4-openssl-dev curl wget libjson-c-dev</span>\n\n<span class=\"token comment\"># python 2.7.18 설치</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> mkdir -p /tmp</span>\n<span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> /tmp</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> wget https://www.python.org/ftp/python/2.7.18/Python-2.7.18.tgz</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> tar xzf Python-2.7.18.tgz</span>\n<span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> /tmp/Python-2.7.18</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> ./configure --enable-optimizations</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> make install</span>\n\n<span class=\"token comment\"># node - nvm 설치</span>\n<span class=\"token instruction\"><span class=\"token keyword\">USER</span> user1</span>\n<span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> /home/user1/</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> NVM_DIR=/home/user1/.nvm</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> . <span class=\"token string\">\"$NVM_DIR/nvm.sh\"</span> &amp;&amp; nvm install <span class=\"token variable\">${NODE_VERSION}</span></span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> . <span class=\"token string\">\"$NVM_DIR/nvm.sh\"</span> &amp;&amp; nvm use v<span class=\"token variable\">${NODE_VERSION}</span></span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> . <span class=\"token string\">\"$NVM_DIR/nvm.sh\"</span> &amp;&amp; nvm alias default v<span class=\"token variable\">${NODE_VERSION}</span></span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> PATH=<span class=\"token string\">\"$NVM_DIR:/home/user1/.nvm/versions/node/v${NODE_VERSION}/bin/:${PATH}\"</span></span>\n\n<span class=\"token comment\"># clean</span>\n<span class=\"token instruction\"><span class=\"token keyword\">USER</span> root</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> apt-get autoremove</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> apt-get clean</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> rm -rf /var/lib/apt/lists/*</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> rm -rf /tmp/Python-2.7.18.tgz</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> rm -rf /tmp/Python-2.7.18</span>\n\n<span class=\"token comment\"># endpoint</span>\n<span class=\"token instruction\"><span class=\"token keyword\">CMD</span> [<span class=\"token string\">\"node\"</span>]</span></code></pre></div>\n<ul>\n<li>해당 형태로 사용시, 대략 아래와 같은 도커 빌드 속도와, 최종 이미지 용량이 나왔습니다. (저의 실제 프로젝트에서는 위 내용보다 더 많은 내용이 있어서 아래 용량이 정확하기 위 코드와 일치하지는 않습니다.)\n<ul>\n<li><strong>docker build → 750 ~ 850 sec</strong></li>\n<li><strong>image 용량 → 1GB</strong></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"변경한-방법\" style=\"position:relative;\"><a href=\"#%EB%B3%80%EA%B2%BD%ED%95%9C-%EB%B0%A9%EB%B2%95\" aria-label=\"변경한 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>변경한 방법</h3>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> python:2.7.18 <span class=\"token keyword\">AS</span> py</span>\n<span class=\"token instruction\"><span class=\"token keyword\">FROM</span> node-nvm:18.13.0 <span class=\"token keyword\">AS</span> nd</span>\n\n<span class=\"token comment\"># base ubuntu</span>\n<span class=\"token instruction\"><span class=\"token keyword\">FROM</span> ubuntu:20.04</span>\n\n<span class=\"token comment\"># python</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">py</span></span> /usr/local/bin /usr/local/bin</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">py</span></span> /usr/local/lib /usr/local/lib</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">py</span></span> /usr/local/include /usr/local/include</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> PYTHONHOME=/usr/local/python</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> PYTHONPATH=/usr/local/lib/python2.7</span>\n\n<span class=\"token comment\"># node</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">nd</span> <span class=\"token property\">--chown</span><span class=\"token punctuation\">=</span><span class=\"token string\">user1:user1</span></span> /home/user1/.nvm /home/user1/.nvm</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">nd</span> <span class=\"token property\">--chown</span><span class=\"token punctuation\">=</span><span class=\"token string\">user1:user1</span></span> /home/user1/.npm /home/user1/.npm</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> NVM_DIR=/home/user1/.nvm</span>\n\n<span class=\"token comment\"># end-point</span>\n<span class=\"token instruction\"><span class=\"token keyword\">CMD</span> [<span class=\"token string\">\"node\"</span>]</span></code></pre></div>\n<ul>\n<li><strong>docker build → 70 ~ 100 sec</strong></li>\n<li><strong>image 용량 → 600MB</strong></li>\n<li>성능 향상\n<ul>\n<li>docker build  속도 약 10배 향상!</li>\n<li>용량 1.6배 줄임!</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"변경한-방법에서-필요한것\" style=\"position:relative;\"><a href=\"#%EB%B3%80%EA%B2%BD%ED%95%9C-%EB%B0%A9%EB%B2%95%EC%97%90%EC%84%9C-%ED%95%84%EC%9A%94%ED%95%9C%EA%B2%83\" aria-label=\"변경한 방법에서 필요한것 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>변경한 방법에서 필요한것</h3>\n<ul>\n<li>\n<p>기존 방법에서는 <code class=\"language-text\">ubuntu:20.04</code> 이미지가 필요했습니다.</p>\n</li>\n<li>\n<p>변경한 방법에서는 아래 3개의 이미지가 필요합니다.</p>\n<ul>\n<li><code class=\"language-text\">python:2.7.18</code></li>\n<li><code class=\"language-text\">node-nvm:18.13.0</code></li>\n<li><code class=\"language-text\">ubuntu:20.04</code></li>\n</ul>\n</li>\n<li>\n<p>각각의 이미지는 기존에 있는(공식 제공되는 것)을 사용할 수도 있고, 직접 구축하여서 사용할 수도 있습니다.</p>\n</li>\n<li>\n<p>본 예제에서는 최종 목적 image가 ubuntu20.04 인데, 별도의 python2.7.18(ubuntu용), node+nvm(ubuntu용)을 구할수 없다면 해당 이미지를 직접 구축하여야 합니다.</p>\n</li>\n<li>\n<p>python:2.7.18 - ubunut 기반용</p>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> ubuntu:20.04</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">USER</span> root</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> apt-get update &amp;&amp; apt-get upgrade -y &amp;&amp; apt-get install -y build-essential zlib1g-dev libcurl4-openssl-dev curl wget libjson-c-dev</span>\n\n<span class=\"token comment\"># python 2.7.18</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> mkdir -p /tmp</span>\n<span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> /tmp</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> wget https://www.python.org/ftp/python/2.7.18/Python-2.7.18.tgz</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> tar xzf Python-2.7.18.tgz</span>\n<span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> /tmp/Python-2.7.18</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> ./configure --enable-optimizations</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> make install</span>\n\n<span class=\"token comment\"># end-point</span>\n<span class=\"token instruction\"><span class=\"token keyword\">CMD</span> [<span class=\"token string\">\"python\"</span>]</span></code></pre></div>\n</li>\n<li>\n<p>node-nvm:18.13.0 -ubuntu 기반용</p>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> python:2.7.18 <span class=\"token keyword\">AS</span> py</span>\n<span class=\"token instruction\"><span class=\"token keyword\">FROM</span> ubuntu:20.04</span>\n\n<span class=\"token comment\"># python 설치 복사</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">py</span></span> /usr/local/bin /usr/local/bin</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">py</span></span> /usr/local/lib /usr/local/lib</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">py</span></span> /usr/local/include /usr/local/include</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> PYTHONHOME=/usr/local/python</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> PYTHONPATH=/usr/local/lib/python2.7</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">ARG</span> NODE_VERSION=18.13.0</span>\n\n<span class=\"token comment\"># node</span>\n<span class=\"token instruction\"><span class=\"token keyword\">USER</span> user1</span>\n<span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> /home/user1/</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> NVM_DIR=/home/user1/.nvm</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> . <span class=\"token string\">\"$NVM_DIR/nvm.sh\"</span> &amp;&amp; nvm install <span class=\"token variable\">${NODE_VERSION}</span></span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> . <span class=\"token string\">\"$NVM_DIR/nvm.sh\"</span> &amp;&amp; nvm use v<span class=\"token variable\">${NODE_VERSION}</span></span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> . <span class=\"token string\">\"$NVM_DIR/nvm.sh\"</span> &amp;&amp; nvm alias default v<span class=\"token variable\">${NODE_VERSION}</span></span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> PATH=<span class=\"token string\">\"$NVM_DIR:/home/user1/.nvm/versions/node/v${NODE_VERSION}/bin/:${PATH}\"</span></span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> node --version</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> npm --version</span>\n\n<span class=\"token comment\"># end-point</span>\n<span class=\"token instruction\"><span class=\"token keyword\">CMD</span> [<span class=\"token string\">\"node\"</span>]</span></code></pre></div>\n</li>\n</ul>\n<h3 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h3>\n<p>dockerfile의 문법상 FROM구문을 여러개 사용가능한데, 해당 방법(multi-stage, multiple from)을 응용하여, 최종 목적 dockerfile 구성시, 다채로운 형태로 작성이 가능합니다. 지금 그냥 하나의 dockerfile에서 하나의 FROM 구문으로 너무 많은 일을 하고 있다면, multi-stage(multiple from)사용이 해결책이 될 수도 있습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/33322103/multiple-froms-what-it-means\">https://stackoverflow.com/questions/33322103/multiple-froms-what-it-means</a></li>\n<li><a href=\"https://blog.alexellis.io/mutli-stage-docker-builds/\">https://blog.alexellis.io/mutli-stage-docker-builds/</a></li>\n</ul>","frontmatter":{"date":"March 23, 2023","title":"docker multi stage","categories":"tech-talk","author":"gseok","emoji":null},"fields":{"slug":"/tech-talk-2023/2023-03-23-docker-multi-stage/"}},"site":{"siteMetadata":{"siteUrl":"https://gseok.github.io","comments":{"utterances":{"repo":"gseok/gseok.github.com"}}}}},"pageContext":{"slug":"/tech-talk-2023/2023-03-10-github-action/","nextSlug":"/tech-talk-2022/2022-12-15-bun-0.3.0/","prevSlug":"/tech-talk-2023/2023-03-23-docker-multi-stage/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}