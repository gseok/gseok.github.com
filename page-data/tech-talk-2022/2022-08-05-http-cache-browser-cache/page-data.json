{"componentChunkName":"component---src-templates-blog-template-js","path":"/tech-talk-2022/2022-08-05-http-cache-browser-cache/","result":{"data":{"cur":{"id":"3f811b2f-2fa0-5e83-b2c5-ea2c5fbeaf72","html":"<h3 id=\"소개\" style=\"position:relative;\"><a href=\"#%EC%86%8C%EA%B0%9C\" aria-label=\"소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>소개</h3>\n<p>web에서 cache는 좀더 포괄적인 의미인데, 혼용하여 쓰거나, 정확하게 이해하고 사용하지 않는 부분이 존재한다. 따라서 http(web) cache 개념을 대략적으로 이해하지 말고, 정확하게 이해해보기 위한 글이다.</p>\n<h3 id=\"web-cache란\" style=\"position:relative;\"><a href=\"#web-cache%EB%9E%80\" aria-label=\"web cache란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web Cache란?</h3>\n<p>web site을 사용할때 발생하는 cache의 종류 이다. web 을 사용할때, 웹 서버에서 웹페이지, 이미지, 멀티미디어 리소스등의 웹 정보들을 전달해준다. 이러한 정보를 저장하여, 웹 서버를 매번 사용하지 않고, cache을 사용하여, 응답시간 및 네트웍 비용을 줄이고, 성능을 향상시킨다.</p>\n<h3 id=\"web-cache의-종류\" style=\"position:relative;\"><a href=\"#web-cache%EC%9D%98-%EC%A2%85%EB%A5%98\" aria-label=\"web cache의 종류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web Cache의 종류</h3>\n<p>web을 사용할때, server, client로 사용자(consumer), 제공자(provider)로 사용의 주체가 나뉘고, network 및 tool(browser)관점에서는, browser, proxy, gw, dns, cdn 등으로, 제공 주체(tool)이 나뉜다.  또한 최종 컨텐츠(page, site 등등)도 나뉠수 있다. 따라서 이 각각이 cache을 가질 수 있다.</p>\n<ul>\n<li>Server 캐시\n<ul>\n<li>서버에서 저장하여 제공하는 캐시</li>\n<li>CDN, DNS, Proxy등 해당 서버에서 저장한다면 sever 캐시로 볼 수 있음</li>\n<li>CDN cache, DNS cache등은 결국 Server캐시의 specific한 이름(더 상세한 이름)</li>\n</ul>\n</li>\n<li>Site 캐시\n<ul>\n<li>page캐시라고도 불림</li>\n<li>client-side 캐시의 일종임\n<ul>\n<li>여담이지만 GraphQL와 같은 기술은 client cache을 잘 활용한다.</li>\n<li>즉 client(fe)입장에서 in-memory성 캐시를 잘 활용함.</li>\n</ul>\n</li>\n<li>웹 페이지가 로드 될때, 웹사이트 데이터를 저장,(사실상 element 구조 저장)</li>\n<li>e.g) <a href=\"https://wordpress.org/plugins/wp-super-cache/\">https://wordpress.org/plugins/wp-super-cache/</a></li>\n</ul>\n</li>\n<li><strong>Browser 캐시</strong>*\n<ul>\n<li>http(web) cache 라고 불린다. (사실 위 설명처럼 web cache는 포괄적 개념인데 혼용하여 쓴다.)\n<ul>\n<li>우리는 좀더 정확하게 browser cache(http cache)라는 용어를 활용하자…</li>\n</ul>\n</li>\n<li>client ↔ server에서 client가 보통 browser가 된다.</li>\n<li>따라서 이 Browser가 http 요청을 disk 나 memory에 캐시하여 사용한다.</li>\n<li>당연한 말이지만, client ↔ server간의 req ↔ res 에 이러한 캐시관련 어떤 규칙이 있어야 한다.!</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"browser-cache-어떻게-하나\" style=\"position:relative;\"><a href=\"#browser-cache-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%98%EB%82%98\" aria-label=\"browser cache 어떻게 하나 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Browser Cache 어떻게 하나?</h3>\n<p><em><strong>기본적으로 http 프로토콜의 Header 을 통해서 한다.!</strong></em></p>\n<p>보통 http의 get 메소드의 header을 통해서 합니다. http는 req - res 간의 응답코드(response status code)을 가지는데이때 아래와 같은 응답 코드 가 오는경우, 캐시(http header)을 확인하게 됩니다.</p>\n<ul>\n<li>200 ok (get요청 관련)</li>\n<li>301 move permanently (영구 리다이렉트)</li>\n<li>404 not found (오류 응답)</li>\n<li>206 parital content (일부 캐시, 완전하지 않은 응답, 부분응답)</li>\n</ul>\n<p>더 자세한 내용은 MDN 문서 보기 → <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching</a></p>\n<h3 id=\"browser-cache---fresh-stale-상태\" style=\"position:relative;\"><a href=\"#browser-cache---fresh-stale-%EC%83%81%ED%83%9C\" aria-label=\"browser cache   fresh stale 상태 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Browser Cache - Fresh, Stale 상태</h3>\n<p>저장된(cached된) HTTP Res는 2가지 상태를 가집니다.</p>\n<ul>\n<li>Fresh: 재사용 가능한 상태. valid함</li>\n<li>Stale: expired된(실효…) 상태, 오래된 상태.\n<ul>\n<li>기본적으로, fresh가 age을 을 먹으면 stale상태가 된다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"browser-cache---cache-제어\" style=\"position:relative;\"><a href=\"#browser-cache---cache-%EC%A0%9C%EC%96%B4\" aria-label=\"browser cache   cache 제어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Browser Cache - Cache 제어</h3>\n<p><strong><code class=\"language-text\">Cache-Control</code> 헤더</strong></p>\n<ul>\n<li>req, res 양쪽에 해당 헤더를 정의 할 수 있다.</li>\n<li>HTTP/1.1 스펙이고, 이전 헤더(Expires)을 대체하는 헤더이다.</li>\n<li>해당 지시문의 값을 통해서, 조건, 기간 등을 정의 할 수 있다.</li>\n<li><strong>Cache-Control 헤더의 여러 값들 살펴보기</strong>\n<ul>\n<li>\n<p><strong><code class=\"language-text\">Cache-Control: no-store</code></strong></p>\n<ul>\n<li>캐시 하지 않음, 아무것도 저장하지 않음</li>\n</ul>\n</li>\n<li>\n<p><strong><code class=\"language-text\">Cache-Control: no-cache</code></strong></p>\n<ul>\n<li>캐시 하지 말라는거 아님!, 캐시 쓰기 전에 서버에 해당 캐시 써도 되냐고 질의</li>\n<li>즉 캐시된 복사본을 사용자 응답으로 쓰기전에, 유효성 확인을 위해 원 서버에 요청 보냄.</li>\n<li>즉 캐시를 하고 있지만, 유효성 검사(validation)을 하도록 강제함. 캐시를 가지고 있으면서, freshness을 유지</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">Cache-Control: private</code></p>\n<ul>\n<li>\n<p>단일 사용자를 위한 캐시, 브라우저 같은 개인 환경에만 저장하라는 뜻이된다.</p>\n</li>\n<li>\n<p>즉 어떤  req가 여러 중계 서버(gw, proxy, 등)들을 통할때 해당 부분에서는 캐시 하지 말라.</p>\n<p><img src=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching/type-of-cache.png\" alt=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching/type-of-cache.png\"></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching/type-of-cache.png\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching/type-of-cache.png</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">Cache-Control: public</code></p>\n<ul>\n<li>공유캐시(중개서버) 등에 저장해도 무방하다.</li>\n<li>대부분 max-age등 사용시 어떤 경우든 사용가는하다는 의미가 내포 되어 있어, public을 따로 주지 않아도 된다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">Cache-Control: max-age=31536000</code></p>\n<ul>\n<li>\n<p><code class=\"language-text\">max-age=&lt;seconds></code></p>\n</li>\n<li>\n<p>유효성 검사, <em>expires</em> 가 별도로 존재해도, 해당 값(<em>max-age</em>) 가 우선된다.</p>\n</li>\n<li>\n<p>변경되지 않을 정적파일(이미지, js파일)등은 긴 시간(1년) 캐시 하는 전략을 사용 할 수 있다.</p>\n</li>\n<li>\n<p>cache 되어 있는 값의 상태</p>\n<ul>\n<li>fresh: 유효한 상태</li>\n<li>stale: 오래된(부실한) 상태 - 만료를 의미한다.</li>\n</ul>\n</li>\n<li>\n<p>cache 값 판별 기준은 <code class=\"language-text\">age</code> 값을 활용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// res</span>\nHTTP/<span class=\"token number\">1.1</span> <span class=\"token number\">200</span> OK\nContent-Type<span class=\"token operator\">:</span> text/html\nContent-Length<span class=\"token operator\">:</span> <span class=\"token number\">1024</span>\nDate<span class=\"token operator\">:</span> Tue<span class=\"token punctuation\">,</span> <span class=\"token number\">22</span> Feb <span class=\"token number\">2022</span> <span class=\"token number\">22</span><span class=\"token operator\">:</span><span class=\"token number\">22</span><span class=\"token operator\">:</span><span class=\"token number\">22</span> GMT <span class=\"token comment\">// 응답시간</span>\nCache-Control<span class=\"token operator\">:</span> max-age=<span class=\"token number\">604800</span>\nAge<span class=\"token operator\">:</span> <span class=\"token number\">86400</span> <span class=\"token comment\">// age는 응답이 생성된 이후 경과된 시간, 공유캐시에서 전송</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">Cache-Control: must-revalidate</code></p>\n<ul>\n<li>검증용 디렉티브, 리소스를 사용하기 전에 검증, 오래된 리소스는 미사용!</li>\n<li>http가 특정상황(네트워크 연결 끊어짐) 등에서 fresh한 상태가 아닐때, cache가 사용되면 문제가 발생하는 경우가 존재 할 수 있다.(금융거래 등의 상황), 이러한 경우, 해당 디렉티브를 사용하여, freshness 을 검증한다.</li>\n<li>no-cache와 혼동이 있는데 의미가 다르다.!</li>\n<li>max-age=10 일때, no-cache는 0초 이후 발생(의미)을 가지고, must-revalidate는 10초 후 의미를 가진다.</li>\n<li>no-cache는 오래되어도 쓰겠다는(없는거 보다 낳다)는 의미를 가지고, must-revalidate는 안쓰겠다는 의미를 가진다.</li>\n<li>해당 부분 stack-overflow: <a href=\"https://stackoverflow.com/questions/18148884/difference-between-no-cache-and-must-revalidate\">https://stackoverflow.com/questions/18148884/difference-between-no-cache-and-must-revalidate</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><code class=\"language-text\">Last-Modified</code> (res), <code class=\"language-text\">If-Modified-Since</code> (req) 헤더</p>\n<ul>\n<li>\n<p>fresh 상태 확인을 위한 헤더들 res, req가 연관이 있다.</p>\n</li>\n<li>\n<p>Last-Modified 헤더(res)가 들어와야 req에 사용이 가능하다.</p>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/Last-Modified\">https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/Last-Modified</a></li>\n<li>HTTP 헤더에 서버가 알고있는 가장 마지막 수정된 날짜와 시각을 담고 있습니다. 이는 저장된 리소스가 이전과 같은지 유효성 검사자로 사용 된다.</li>\n</ul>\n</li>\n<li>\n<p>다음 예제로 보자</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// RES!</span>\n\nHTTP/<span class=\"token number\">1.1</span> <span class=\"token number\">200</span> OK\nContent-Type<span class=\"token operator\">:</span> text/html\nContent-Length<span class=\"token operator\">:</span> <span class=\"token number\">1024</span>\nDate<span class=\"token operator\">:</span> Tue<span class=\"token punctuation\">,</span> <span class=\"token number\">22</span> Feb <span class=\"token number\">2022</span> <span class=\"token number\">22</span><span class=\"token operator\">:</span><span class=\"token number\">22</span><span class=\"token operator\">:</span><span class=\"token number\">22</span> GMT\nLast-Modified<span class=\"token operator\">:</span> Tue<span class=\"token punctuation\">,</span> <span class=\"token number\">22</span> Feb <span class=\"token number\">2022</span> <span class=\"token number\">22</span><span class=\"token operator\">:</span><span class=\"token number\">00</span><span class=\"token operator\">:</span><span class=\"token number\">00</span> GMT <span class=\"token comment\">// 해당 헤더가 있어야 req시 If-Modified-Since 사용 가능</span>\nCache-Control<span class=\"token operator\">:</span> max-age=<span class=\"token number\">3600</span></code></pre></div>\n<ul>\n<li>해당 RES는 22:22 에 생성되었고, 1시간의 max-age가 설정되어있다.</li>\n<li>따라서 23:22까지는 fresh 함을 보장한다.\n<ul>\n<li><strong>23:22 가 되면 해당 cache는 stale 되어진다</strong>.</li>\n</ul>\n</li>\n<li>해당 캐시 데이터는 22:00 분에 마지막으로 수정된 값으로 생성되었다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// REQ!!</span>\n\nGET /index.html HTTP/<span class=\"token number\">1.1</span>\nHost<span class=\"token operator\">:</span> example.com\nAccept<span class=\"token operator\">:</span> text/html\nIf-Modified-Since<span class=\"token operator\">:</span> Tue<span class=\"token punctuation\">,</span> <span class=\"token number\">22</span> Feb <span class=\"token number\">2022</span> <span class=\"token number\">22</span><span class=\"token operator\">:</span><span class=\"token number\">00</span><span class=\"token operator\">:</span><span class=\"token number\">00</span> GMT <span class=\"token comment\">// RES의 Last-Modifined사용!</span></code></pre></div>\n<ul>\n<li>res 에서 23:22 이 되면 해당 cache가 stale해지기 때문에, 신규 req시 특정 시간 이후 변경사항이 존재하는지 검증 요청을 다시 보낼 수 있다.!!!</li>\n<li>즉 현재 안전한 시간이라도, 한번 더 검증을 위해서 검증 요청을 보낸다.\n<ul>\n<li>클라(브라우저)가 서버한테 → 음.. 나 캐시값 있는데.. 이거 그냥 써도 되니? 라고 하는것.</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// RES!</span>\n\nHTTP/<span class=\"token number\">1.1</span> <span class=\"token number\">304</span> Not Modified\nContent-Type<span class=\"token operator\">:</span> text/html\nDate<span class=\"token operator\">:</span> Tue<span class=\"token punctuation\">,</span> <span class=\"token number\">22</span> Feb <span class=\"token number\">2022</span> <span class=\"token number\">22</span><span class=\"token operator\">:</span><span class=\"token number\">23</span><span class=\"token operator\">:</span><span class=\"token number\">22</span> GMT\nLast-Modified<span class=\"token operator\">:</span> Tue<span class=\"token punctuation\">,</span> <span class=\"token number\">22</span> Feb <span class=\"token number\">2022</span> <span class=\"token number\">22</span><span class=\"token operator\">:</span><span class=\"token number\">00</span><span class=\"token operator\">:</span><span class=\"token number\">00</span> GMT\nCache-Control<span class=\"token operator\">:</span> max-age=<span class=\"token number\">3600</span></code></pre></div>\n<ul>\n<li>서버가 304 Not Modified 응답을 주면, 지정된 캐시 컨트롤 시간 이후, 내용이 그대로라는걸 알려 줄 수 있다.\n<ul>\n<li>서버가 클라(브라우저)한테 → 응.. 아직 바뀐거 없어 캐시된거 그냥 쓰렴~ 이라고 하는것</li>\n</ul>\n</li>\n<li>물론 304 가 아니면, 신규 요청 - 응답 형태가 되어야 한다.</li>\n</ul>\n</li>\n</ul>\n<p><code class=\"language-text\">ETag</code> (res), <code class=\"language-text\">If-None-Match</code> (req) 헤더</p>\n<ul>\n<li>\n<p>last-modified 의 서버시각 문제등을 해결.</p>\n</li>\n<li>\n<p>결국 fresh 상태 확인을 위한 헤더들,  ETag (res), If-None-Match (req), If-Match (req) 형태의 사용을 한다.</p>\n</li>\n<li>\n<p>last-modified와 같이 res에 ETag가 있어야 req에서 사용 가능하다.</p>\n</li>\n<li>\n<p>결국 cache validation 을 하는거다.</p>\n</li>\n<li>\n<p>다음 예제로 보자</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// RES</span>\n\nHTTP/<span class=\"token number\">1.1</span> <span class=\"token number\">200</span> OK\nContent-Type<span class=\"token operator\">:</span> text/html\nContent-Length<span class=\"token operator\">:</span> <span class=\"token number\">1024</span>\nDate<span class=\"token operator\">:</span> Tue<span class=\"token punctuation\">,</span> <span class=\"token number\">22</span> Feb <span class=\"token number\">2022</span> <span class=\"token number\">22</span><span class=\"token operator\">:</span><span class=\"token number\">22</span><span class=\"token operator\">:</span><span class=\"token number\">22</span> GMT\nETag<span class=\"token operator\">:</span> <span class=\"token string\">\"deadbeef\"</span>\nCache-Control<span class=\"token operator\">:</span> max-age=<span class=\"token number\">3600</span>\n\n&lt;!doctype html>\n…</code></pre></div>\n<ul>\n<li>1시간, 22:22 에 만듬, 23:22 에 만료</li>\n<li>ETag 특정값 존재, last-modified와 별개로, 서버가 content의 캐시(값)을 관리 (동일 데이터 인가..!)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// REQ</span>\n\nGET /index.html HTTP/<span class=\"token number\">1.1</span>\nHost<span class=\"token operator\">:</span> example.com\nAccept<span class=\"token operator\">:</span> text/html\nIf-None-Match<span class=\"token operator\">:</span> <span class=\"token string\">\"deadbeef\"</span>  <span class=\"token comment\">// ETag 가 있어야 사용 가능</span></code></pre></div>\n<ul>\n<li>서버에 req 보낼때 ETag검증 요청!\n<ul>\n<li>If-None-Match는 변경이 되었다면 알려줘!</li>\n<li>If-Match는 변경이 안되었다면(똑같으면) 알려줘!</li>\n</ul>\n</li>\n<li>위 Req가 같을 때 다시 응답은 아래와 같음, Get, Put 와 같이 요청에 따라 다르다.\n<ul>\n<li>Get: 검증했는데 맞으면 304 Not Modified, 만약 새로운 리소스(새버전) 존재시 200ok와 새로운 Etag을 다시 서버가 Res 함</li>\n<li>Put: 변경이 되었을때 혹은 같은때, 200 ok 와 새로운 Etag, ETag가 다르면412 precondition failed</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>💡 ETag 와 Last-Modified 가 같이 있는 경우?</p>\n<ul>\n<li>ETag가 우선된다.!</li>\n<li>둘다 있을때 Cache Validation으 ETag가 우선되지만, CMS, 클롤러 등에서 Last-Modified을 사용 할 수 있다.(활용여지가 표준 헤더이다.) 따라서 같이 쓰는경우가 존재한다.</li>\n</ul>\n<p>💡 ETag 와 Cache-Control 이 같이 있는 경우?</p>\n<ul>\n<li>기본적으로 cache-control의 max-age까지 cache-control의 값을 활용한다.</li>\n<li>시간이 만료되면, 유효성 검사를 한다.!</li>\n<li>유효성 검사에서 304 Not Modified 나 200ok가 오면 해당 시점부터 다시 cache-control이 갱신되어 사용된다.</li>\n</ul>\n<h3 id=\"browser-cache의-cache-control-flow-chart\" style=\"position:relative;\"><a href=\"#browser-cache%EC%9D%98-cache-control-flow-chart\" aria-label=\"browser cache의 cache control flow chart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Browser Cache의 Cache Control Flow Chart</h3>\n<p><img src=\"https://web-dev.imgix.net/image/admin/htXr84PI8YR0lhgLPiqZ.png?auto=format&#x26;w=650\" alt=\"https://web-dev.imgix.net/image/admin/htXr84PI8YR0lhgLPiqZ.png?auto=format&#x26;w=650\"></p>\n<p><a href=\"https://web-dev.imgix.net/image/admin/htXr84PI8YR0lhgLPiqZ.png?auto=format&#x26;w=650\">https://web-dev.imgix.net/image/admin/htXr84PI8YR0lhgLPiqZ.png?auto=format&#x26;w=650</a></p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li>wiki: <a href=\"https://en.wikipedia.org/wiki/Web_cache\">https://en.wikipedia.org/wiki/Web_cache</a></li>\n<li>aws web cache(dns cache): <a href=\"https://aws.amazon.com/ko/caching/web-caching/\">https://aws.amazon.com/ko/caching/web-caching/</a></li>\n<li>cloud flare: <a href=\"https://www.cloudflare.com/learning/cdn/what-is-caching/\">https://www.cloudflare.com/learning/cdn/what-is-caching/</a></li>\n<li>cache - blog: <a href=\"https://mangkyu.tistory.com/69\">https://mangkyu.tistory.com/69</a></li>\n<li>web cache kind: <a href=\"https://managewp.com/blog/types-of-web-cache\">https://managewp.com/blog/types-of-web-cache</a></li>\n<li>cache - kind - blog: <a href=\"https://happist.com/558227/%EC%9B%B9%EC%84%9C%EB%B2%84%EC%97%90%EC%84%9C-%EB%A7%8E%EC%9D%B4-%EC%82%AC%EC%9A%A9%EB%90%98%EB%8A%94-%EC%BA%90%EC%8B%9C-%EC%A2%85%EB%A5%98%EC%97%90-%EB%8C%80%ED%95%B4-%EC%95%8C%EC%95%84-%EB%B3%B4\">https://happist.com/558227/웹서버에서-많이-사용되는-캐시-종류에-대해-알아-보</a></li>\n<li>cache - img - blog: <a href=\"https://server-talk.tistory.com/469\">https://server-talk.tistory.com/469</a></li>\n<li>web-cache - blog\n<ul>\n<li>\n<p><a href=\"https://wp-rocket.me/blog/different-types-of-caching/\">https://wp-rocket.me/blog/different-types-of-caching/</a></p>\n</li>\n<li>\n<p><a href=\"https://hahahoho5915.tistory.com/33\">https://hahahoho5915.tistory.com/33</a></p>\n</li>\n<li>\n<p><a href=\"https://velog.io/@jangwonyoon/%EC%BA%90%EC%8B%9C%EC%99%80-%EC%9B%B9-%EC%BA%90%EC%8B%9C\">https://velog.io/@jangwonyoon/캐시와-웹-캐시</a></p>\n</li>\n<li>\n<p><a href=\"https://ko.wikipedia.org/wiki/%EC%9B%B9_%EC%BA%90%EC%8B%9C\">https://ko.wikipedia.org/wiki/웹_캐시</a></p>\n</li>\n<li>\n<p><a href=\"https://goddaehee.tistory.com/171\">https://goddaehee.tistory.com/171</a></p>\n</li>\n</ul>\n</li>\n<li>http caching\n<ul>\n<li>공식 스펙: <a href=\"https://httpwg.org/specs/rfc9111.html\">https://httpwg.org/specs/rfc9111.html</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching</a></li>\n<li><a href=\"https://www.mnot.net/cache_docs/\">https://www.mnot.net/cache_docs/</a></li>\n<li><a href=\"https://web.dev/http-cache/\">https://web.dev/http-cache/</a></li>\n</ul>\n</li>\n<li>http cache validate\n<ul>\n<li><a href=\"https://withbundo.blogspot.com/2017/07/http-13-http-iii-if-match-if-modified.html\">https://withbundo.blogspot.com/2017/07/http-13-http-iii-if-match-if-modified.html</a></li>\n<li><a href=\"https://goddaehee.tistory.com/171\">https://goddaehee.tistory.com/171</a></li>\n</ul>\n</li>\n<li>toss- <a href=\"https://toss.tech/article/smart-web-service-cache\">https://toss.tech/article/smart-web-service-cache</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%86%8C%EA%B0%9C\">소개</a></li>\n<li><a href=\"#web-cache%EB%9E%80\">Web Cache란?</a></li>\n<li><a href=\"#web-cache%EC%9D%98-%EC%A2%85%EB%A5%98\">Web Cache의 종류</a></li>\n<li><a href=\"#browser-cache-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%98%EB%82%98\">Browser Cache 어떻게 하나?</a></li>\n<li><a href=\"#browser-cache---fresh-stale-%EC%83%81%ED%83%9C\">Browser Cache - Fresh, Stale 상태</a></li>\n<li><a href=\"#browser-cache---cache-%EC%A0%9C%EC%96%B4\">Browser Cache - Cache 제어</a></li>\n<li><a href=\"#browser-cache%EC%9D%98-cache-control-flow-chart\">Browser Cache의 Cache Control Flow Chart</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>\n</div>","excerpt":"소개 web에서 cache는 좀더 포괄적인 의미인데, 혼용하여 쓰거나, 정확하게 이해하고 사용하지 않는 부분이 존재한다. 따라서 http(web) cache 개념을 대략적으로 이해하지 말고, 정확하게 이해해보기 위한 글이다. Web Cache란? web site을 사용할때 발생하는 cache의 종류 이다. web 을 사용할때, 웹 서버에서 웹페이지, 이미지, 멀티미디어 리소스등의 웹 정보들을 전달해준다. 이러한 정보를 저장하여, 웹 서버를 매번 사용하지 않고, cache을 사용하여, 응답시간 및 네트웍 비용을 줄이고, 성능을 향상시킨다. Web Cache의 종류 web을 사용할때, server, client로 사용자(consumer), 제공자(provider)로 사용의 주체가 나뉘고, network 및 tool(browser)관점에서는, browser, proxy, gw, dns, cdn 등으로, 제공 주체(tool)이 나뉜다.  또한 최종 컨텐츠(page, site 등등)도 나뉠…","frontmatter":{"date":"August 05, 2022","title":"http(web) cache 이해하기 - browser cache","categories":"tech-talk","author":"gseok","emoji":null},"fields":{"slug":"/tech-talk-2022/2022-08-05-http-cache-browser-cache/"}},"next":{"id":"17ce4f90-43d9-5564-8407-c676753f05bf","html":"<h3 id=\"왜-바꾸었나요\" style=\"position:relative;\"><a href=\"#%EC%99%9C-%EB%B0%94%EA%BE%B8%EC%97%88%EB%82%98%EC%9A%94\" aria-label=\"왜 바꾸었나요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>왜 바꾸었나요!</h3>\n<p>기존에 잘 구동되던, Jekyll 로 만들어진 블로그를 Gatsby 로 마이그레이션 하였습니다. 여러가지 이유가 있지만, 현재 주력으로 사용하고 있는 javascript fw인 react로 되어있다는 점과, build가 기존 Jekyll보다 빠르다는 소문? 을 듣고 변경을 결심하게 되었습니다.</p>\n<h3 id=\"gatsby-설치하고-local에서-띄워보기\" style=\"position:relative;\"><a href=\"#gatsby-%EC%84%A4%EC%B9%98%ED%95%98%EA%B3%A0-local%EC%97%90%EC%84%9C-%EB%9D%84%EC%9B%8C%EB%B3%B4%EA%B8%B0\" aria-label=\"gatsby 설치하고 local에서 띄워보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby 설치하고 Local에서 띄워보기</h3>\n<p>공식 사이트의 튜토리얼을 참고하여, 직접 사이트를 구축하고 띄워는 방법도 있습니다. 하지만 바퀴를 새로 발명하지 않아도 바퀴가 이미 존재하듯이, 이미 만들어져 있는 여러 블로그 테마중 하나를 사용하여 띄워 보겠습니다.</p>\n<ul>\n<li>공식 사이트 참고(<a href=\"https://www.gatsbyjs.com/docs/how-to/\">https://www.gatsbyjs.com/docs/how-to/</a>)</li>\n</ul>\n<p>Gatsby는 Jekyll와 마찬가지로 이미 생성된 여러가지 Theme(Gatsby Starter Lib)을 지원합니다. 사실 블로그가 아닌 static page을 쉽게 생성해주는 framework이기 때문에, 여러 종류(e.g. 개인 홈페이지, 간단한 기업 홈페이지, 쇼핑몰 사이트 등등)의 정적 페이지를 만들 수 있습니다.</p>\n<ul>\n<li>공식 사이트에 있는 Starter Lib 참고(<a href=\"https://www.gatsbyjs.com/starters/?v=2\">https://www.gatsbyjs.com/starters/?v=2</a>)</li>\n</ul>\n<p>저는 기존 Jekyll로 블로그를 만들었었기 때문에, 동일하게 Gasby로 블로그를 만들었습니다. 위 공식 사이트의 Stater Lib이외, 한국 개발자가 생성한 Gatsby Blog Template을 사용했습니다.</p>\n<ul>\n<li><a href=\"https://github.com/zoomKoding/zoomkoding-gatsby-blog\">https://github.com/zoomKoding/zoomkoding-gatsby-blog</a></li>\n<li><a href=\"https://github.com/JaeYeopHan/gatsby-starter-bee\">https://github.com/JaeYeopHan/gatsby-starter-bee</a></li>\n</ul>\n<p>본 글에서는 zoomking 템플릿을 사용하였는데, 사실 어떤 템플릿이던 본인이 원하는 템플릿을 사용하면 됩니다. 다만, 각 템플릿의 실제 구현체에서 화면을 구성하는 형태가 각각 존재 할 수 있는데, 이때 해당 형태(각 템플릿이 가이드하는 형태)에 맞게 설정하는 부분만 잘 맞추어 주면 됩니다.</p>\n<p><strong>템플릿 가져오기</strong></p>\n<ul>\n<li>\n<p>템플릿을 사용하려면 템플릿을 가져와야 합니다.</p>\n<ul>\n<li>gatsby가 제공하는 cli로 생성 가능합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">$ npm install -g gatsby-cli\n# gatsby new <span class=\"token punctuation\">[</span>프로젝트이름<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>테마주소<span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>또다른 방법으로 해당 템플릿의 github 의 소스를 clone해서 가져와도 됩니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">$ git clone https<span class=\"token operator\">:</span><span class=\"token comment\">//github.com/zoomkoding/zoomkoding-gatsby-blog.git</span></code></pre></div>\n</li>\n</ul>\n<p><strong>가져온 템플릿(코드)를 빌드하고, 로컬에서 실행해보기</strong></p>\n<ul>\n<li>\n<p>사실 코드를 들고 왔다면, 이후에는 일반적인 프로젝트를 로컬에서 수행하는것과 동일합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">$ npm install\n$ npm start</code></pre></div>\n</li>\n<li>\n<p>위 명령어 수행후 browser에서 <a href=\"http://localhost:8000/\"><code class=\"language-text\">http://localhost:8000/</code></a> 주소를 열어서 곧바로 확인 가능합니다.</p>\n</li>\n</ul>\n<p><strong>템플릿에 post 작성하기</strong></p>\n<ul>\n<li>\n<p>템플릿 하위의 content 폴더 하위에 markdown(.md) 파일을 생성하여 post을 작성 할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 604px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGElEQVQY03XGXU+CUByAcb5Bm3ddNUEgxBQwwvP6P+cAkeALamptOUq7aF7XTWvluvFrN9fWunH77dmjtXwflbdBp80p5pRc+l5Drzf0umno5qF1y9CP0WxSwOatK0t0s6T5XYcNDF/YYdwIpNlVRiB1D47RTvmG37+y1bta79T6i64+kufvYruHx0/xtCu2+7P05eTqoYarGqkO/YMqzfQw6S9wNoP+DPI5TkYkLWk2xek4hJxlE5SMSTbBadmFPJSDXjyK4mGkRr1krDm2xaUCqSQAcEYJphgL4JwRFEWcUmAsjVUshQROCRacKXE4JUC7aHcct91C11yo+WLZHwzL6QwRali247Zsx7Ud13Kav3PedP9N8wdsLFLdqRHw4wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"0\"\n        title=\"0\"\n        src=\"/static/3520a25e5cad58f8952216ba6c3fc2f3/87254/0.png\"\n        srcset=\"/static/3520a25e5cad58f8952216ba6c3fc2f3/e9ff0/0.png 180w,\n/static/3520a25e5cad58f8952216ba6c3fc2f3/f21e7/0.png 360w,\n/static/3520a25e5cad58f8952216ba6c3fc2f3/87254/0.png 604w\"\n        sizes=\"(max-width: 604px) 100vw, 604px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n<li>\n<p>각 md 파일의 최상단에는, Jekyll 와 비슷한 형태로, 헤더에 post정보를 meta형태로 입력 할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">---\nemoji<span class=\"token operator\">:</span> 🔮\ntitle<span class=\"token operator\">:</span> Gatsby 테마로 GitHub Blog 만들기\ndate<span class=\"token operator\">:</span> '<span class=\"token number\">2021</span><span class=\"token number\">-07</span><span class=\"token number\">-06</span> <span class=\"token number\">00</span><span class=\"token operator\">:</span><span class=\"token number\">00</span><span class=\"token operator\">:</span><span class=\"token number\">00</span>'\nauthor<span class=\"token operator\">:</span> 줌코딩\ntags<span class=\"token operator\">:</span> 블로그 github-pages gatsby\ncategories<span class=\"token operator\">:</span> 블로그 featured\n---</code></pre></div>\n</li>\n<li>\n<p>이후 각 post는 md(markdown) 형태로 작성하면 됩니다.</p>\n</li>\n</ul>\n<h3 id=\"jekyll와-달리-편리했던점은\" style=\"position:relative;\"><a href=\"#jekyll%EC%99%80-%EB%8B%AC%EB%A6%AC-%ED%8E%B8%EB%A6%AC%ED%96%88%EB%8D%98%EC%A0%90%EC%9D%80\" aria-label=\"jekyll와 달리 편리했던점은 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jekyll와 달리 편리했던점은?</h3>\n<ul>\n<li>Gatsby는 node.js와 같이 javascript 기반이기 때문에 기존 javascript기반 개발환경에서 곧바로 이용 가능했습니다. 즉 언어의 통일성이 유지됩니다. javascript개발자라면 아마 여기서부터 벌써 너무 편리할꺼 같습니다.\n<ul>\n<li>Jekyll의 경우 Ruby 기반으로 Ruby 설치 및 Ruby용 package manager(<code class=\"language-text\">gem</code>) 설치가 필요 합니다.</li>\n<li>이후 Ruby을 통해서 Jekyll설치 및 Jekyll에서 사용하는 dep 설치하는 방식 입니다.</li>\n<li>물론  Gatsby도 <code class=\"language-text\">npm(yarn)</code>이 있어야하고, 해당 package manager로 dep설치가 필요하지만, 기존 javascript개발자라면 이질감 없이 곧바로 적용 가능 합니다.</li>\n</ul>\n</li>\n<li>React코드를 직접 수정하여, 전체 blog을 커스터 마이징 가능합니다.</li>\n</ul>\n<p>작성하고 보니, javascript개발 및 react개발 경험이 있을때 편리했던점이 되네요!</p>\n<h3 id=\"jekyll-에서-사용하던--post-마이그레이션-하기\" style=\"position:relative;\"><a href=\"#jekyll-%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8D%98--post-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98-%ED%95%98%EA%B8%B0\" aria-label=\"jekyll 에서 사용하던  post 마이그레이션 하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jekyll 에서 사용하던  post 마이그레이션 하기</h3>\n<p>Jekyll 역시 markdown형태로 각 post을 서빙하고 있었기 때문에, 해당 파일을 새롭게 제공하는 Gatsby 로 이동하는 형태로 간단하게 post을 마이그레이션 할 수 있습니다.</p>\n<blockquote>\n<p>주의! - md(markdown) 파일의 헤더 영역의 spec이 다른 부분은 맞추어 주어야 합니다.</p>\n</blockquote>\n<blockquote>\n<p>주의! - Gatsby가 캐시하는 부분이 있어서, 개발도중 정상적으로 나오지 않는 경우 아래 명령어를 통해서 캐시를 지워야 합니다.</p>\n</blockquote>\n<p><code class=\"language-text\">gatsby clean</code></p>\n<blockquote>\n</blockquote>\n<h3 id=\"utterances-추가하기\" style=\"position:relative;\"><a href=\"#utterances-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"utterances 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>utterances 추가하기</h3>\n<p>utterances는 블로그 포스트의 댓글달기를 github의 issue와 연동하여 제공하는 서비스 입니다. 해당 방법을 통하여 각 블로그 포스트에 댓글 달기를 지원할 수 있습니다.</p>\n<p>공식 추가방법: <a href=\"https://utteranc.es/\">https://utteranc.es/</a></p>\n<p><strong>추가방법(zoomkoding)</strong></p>\n<ul>\n<li>\n<p>github 레포지토리가 public이여야 합니다.</p>\n<ul>\n<li>github private → public 참고: <a href=\"https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/managing-repository-settings/setting-repository-visibility\">https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/managing-repository-settings/setting-repository-visibility</a></li>\n</ul>\n</li>\n<li>\n<p>utterances app(github app)을 설치합니다.</p>\n<ul>\n<li><a href=\"https://github.com/apps/utterances\">https://github.com/apps/utterances</a></li>\n</ul>\n</li>\n<li>\n<p>템플릿(zoomkoding)의 config파일(gatsby-meta-config.js)에서 utterances 항목을 설정합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">comments<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    utterances<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      repo<span class=\"token operator\">:</span> ``<span class=\"token punctuation\">,</span> <span class=\"token comment\">// `zoomkoding/zoomkoding-gatsby-blog`,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n</li>\n</ul>\n<h3 id=\"google-analytics-tracking-id--추가하기\" style=\"position:relative;\"><a href=\"#google-analytics-tracking-id--%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"google analytics tracking id  추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>google analytics tracking id  추가하기</h3>\n<ul>\n<li>구글 <a href=\"https://analytics.google.com/\">애널리틱스에</a> 접속합니다.</li>\n<li>계정을 생성하고, Tracking ID을 발급받습니다.\n<ul>\n<li>계정은 아무 이름으로 생성해도 무방합니다.</li>\n</ul>\n</li>\n<li>구글 애널리틱스 > 우하단 관리 > 누르면 우측에 ‘계정, 속성, 보기’ 화면이 나옵니다.\n<ul>\n<li>속성 부분에서 중간쯤에 <code class=\"language-text\">&lt;> 추적정보 > 추적코드</code> 을 눌러보면 gtag에서 사용가능한 추적 ID을 알 수 있습니다.</li>\n</ul>\n</li>\n<li>해당 ID 값을 <code class=\"language-text\">gatsby-meta-config.js</code> 내부의 <code class=\"language-text\">ga</code> 속성에 넣어줍니다.</li>\n</ul>\n<h3 id=\"github-gh-pages-로-배포하기\" style=\"position:relative;\"><a href=\"#github-gh-pages-%EB%A1%9C-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\" aria-label=\"github gh pages 로 배포하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Github gh-pages 로 배포하기</h3>\n<ul>\n<li>\n<p>github이 기본적으로 제공하는 static page 배포 기능을 활용하는 방법 입니다.</p>\n</li>\n<li>\n<p>계정 + 프로젝트 별로 static한 page을 서비스 할 수 있습니다.</p>\n</li>\n<li>\n<p>기본 컨셉은, github의 Settings 화면을 통해서 “특정 브랜치”, “특정 폴더(루트)” 을 설정하여 배포합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4UlEQVQoz11Tx27jMBDVeVXYe5HYZLkpToIc9v9/bEHTcZwFHgRC4sy8MuqkjROWIxIjEgPkdlnT4Zq3HRA1QD4i3j41TC/nEYmuFd/viRFyoqJaTj5u2hfliqzPJG2UNraD8lm5NGE5YdmF9RLKmQjX6olw83pb1l2XL7t+6rhDqgFRgChI9YSlXdb1/C5tBER1yiXlEqS6ssISUo25I9Jj4Wv73zxHJFoXQFSdnLcdc9vGDpBrn33cKu05P714xQD5QyMS3ZyOgKge8BFV5Us+lePNhYNyqQesB6zdHiB71vwYVo67XQqkCrEqycctHa4+bmYuTZG0keuFm4BVAtSOLy26UE5UeswNlQ4xrVw6nD/ssuZtd+Fg5oK5bV4AasbfQjq7HISJ0ibEzJ+Jzvm0f/6N60X7ck8oCBuRjIDaAdA69lXzerpJG5uBIxLa5+3yUY47ERYxg7gjwmJuITWA2gbETPOy0z7/LAkSVCcdLyZeXd5VehPx3cTd512FK9aZ3CFsjXaAvCvHt1AuLecRCcQd04HqZajm1zc9rBig6AHpAR0A7QF70H6uTsvQx+18+1rKCbHvxWIaVRj0TX4ij0ndf7kzNWufWzxhvSzp6O9pCROECUzNWEbIXPth/gEIMk+rqoBITwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/e0563d13319d0aba48199c03efbd4dcc/37523/1.png\"\n        srcset=\"/static/e0563d13319d0aba48199c03efbd4dcc/e9ff0/1.png 180w,\n/static/e0563d13319d0aba48199c03efbd4dcc/f21e7/1.png 360w,\n/static/e0563d13319d0aba48199c03efbd4dcc/37523/1.png 720w,\n/static/e0563d13319d0aba48199c03efbd4dcc/302a4/1.png 1080w,\n/static/e0563d13319d0aba48199c03efbd4dcc/07a9c/1.png 1440w,\n/static/e0563d13319d0aba48199c03efbd4dcc/bb33f/1.png 2208w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>따라서 해당 설정 이후, 로컬에서 빌드하고, 빌드 결과를 “특정 브랜치” 에 push하는 형태로도 배포가 가능합니다.</li>\n<li>하지만 매번 로컬 빌드 → 직접 특정 브랜치에 push하는게 귀찮은 경우, pr(pull request)에 따라서 자동으로 배포해주는 <code class=\"language-text\">github action</code> 을 활용하거나, local에서 쉽게 배포를 해주는(<code class=\"language-text\">gh-pages</code>) 을 활용하는것을 추천합니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"github-action-사용하기\" style=\"position:relative;\"><a href=\"#github-action-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"github action 사용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Github Action 사용하기</h3>\n<ul>\n<li>\n<p>개인용 Token을 하나 발급 받습니다. - <a href=\"https://github.com/settings/tokens\">https://github.com/settings/tokens</a></p>\n<ul>\n<li>\n<p>프로젝트 Setting 이 아닌, 사용자 계정 Setting → 좌측 하단의 Developer settings → Personal access tokens 입니다.</p>\n</li>\n<li>\n<p>이름은 아무거나 해도 됩니다.</p>\n</li>\n<li>\n<p>repo 권한을 주어야 합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 99.44444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC0UlEQVQ4y3WUaY/cNgyG/aFN0xmPT0nWLVmWj/E19+HZOTbJ//9Phe1Fm6Zd4AHxggQlgqTkhJBpW3NdcF1QaanKmcqpskxZaSpE1SpMPsMBWLb7od0N++t7N4nucNueHvXmsj8/Tdkvg8QN8f/ieCGKojAM/JHQ/xCTDgI/jkKEIIQxhAAhiCCAEwgBBIETxnDXpG+Xfjg2w6m5XzeP62Y4tffrZjg212N9PdaPYXs799fDqIdT+3buhmNzO7VOGMF9b3+8Lm+X/tvz/P11ed527/fj6+34uh/u1+374/TtcXoM2+/Py+t26CrZr+VklRPGiZZEK6olSRVVAiuBtSSj+NkKPEcFgxNIMOhEiOf11g3Q11W88IAbJJ+DRhv+g+MGkMlMKMuVhZj/9mX55av7Gb//sVx6kRfhj1F5EaYyozITaclU7kXJwouXPviMVYimTLwKsRNClhaNzps4EXMxSx/OuAGaBPqPB7o+cH3ghIit+2O3u8iswtyItBSmkqYat01apnKuC5GWKluLaQW5LogqoWyhrB0/JmRyibRKuElYOgOwhERBohBVmM9OnVCdUAVoGhEb0Wzsdre/1v2p3w9EZAGgEeIhZBHiERJxIgLIPSg9wH0ofDAyasBdHzoBYKbopCmVrU3emqLNyk7bxla9KfusbJlpUbpNdJekm0T32GyTdIPNxouJ4wNabu8qqxce+HMF5n4sPLDwQIQ4JBoSmTCVUEWESah2g49ujaNyfaDKXXt8qqziuvQiPI/RiwlTOdMFU7lIK0RTH9AAstUYnZmSmenWu3tWtna9Udnai7AboHH+09sWaUllTqUNAF368F/veUzOunr/MEWjbO3HZA5My2OpzJkqqMp5Wo6LEKBfk4XdNIeXyRuRln+vnhdhpse06WbL05II++tP4gaQ6LVtzyqrlK2ptPPxc9mYGyIs5hnmGRFj5T9f/hfruYG3R5kNfwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/4f81f05278faec9ed577c37380e5d0ab/37523/2.png\"\n        srcset=\"/static/4f81f05278faec9ed577c37380e5d0ab/e9ff0/2.png 180w,\n/static/4f81f05278faec9ed577c37380e5d0ab/f21e7/2.png 360w,\n/static/4f81f05278faec9ed577c37380e5d0ab/37523/2.png 720w,\n/static/4f81f05278faec9ed577c37380e5d0ab/302a4/2.png 1080w,\n/static/4f81f05278faec9ed577c37380e5d0ab/d56e1/2.png 1130w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n  <aside>\n  💡 주의! 처음 토큰이 생성되었을때 토큰값을 복사해서 가지고 있어야 합니다.\n  </aside>\n</li>\n</ul>\n</li>\n<li>\n<p>이제 프로젝트에 가서 → 프로젝트 Action용 Secrets을 저장합니다.</p>\n<ul>\n<li>\n<p>이름은 아무거나 해도 됩니다.</p>\n</li>\n<li>\n<p>토큰값을 위 개인토큰으로 생성한걸 활용합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABh0lEQVQoz12QyY7bMBBEdR9b4k52c18kS5bHDnKY//+0gcTEmAR4INBAF6u6BiJQQhyZuVJ9pXriYOPs0oKhXYj6h0l+jEJCrLfPsjyMrwNT7j9xantZPvO8a1cUJvBVYdI2Y2jaZnDF55uNM5V24DrU9RnrNnG4EEUEhrKFuoWyubTYOPu8Ymg9jvFN2EaEnfhhNlDl4Pyym49Mh7K29RXKJiF1T4WdJCEJSBKiwsS1H7j2oawjMxeienKmHNfexhl8Na6Ar39p4KtLC9eeCCQCB4WprU+m3Fs8Uk2lxTineU9tb9uvZf99f32V2zO2Pc8PbTOR9ogtIeblwbX/mOQfMTMThytVk3AMKoPCsXFs1BSq85X2686bmfJCh5EZKu3IzMgOfU9xjuYdp48/OZzn7WXjojD11VC2ujx9Xs/C3m1leVR1dmaixHwUpm1N850pSwQcLwdhgwqJCJw4vKHSKpt7z6FsMVSp/cB0yPNdYaQSmbLHtUxfz/A/6UWcGCKRCJiY+QYuxkCtZ9bu1wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3\"\n        title=\"3\"\n        src=\"/static/ed9d0072bd3a1de06fd8c2cdaeb84bac/37523/3.png\"\n        srcset=\"/static/ed9d0072bd3a1de06fd8c2cdaeb84bac/e9ff0/3.png 180w,\n/static/ed9d0072bd3a1de06fd8c2cdaeb84bac/f21e7/3.png 360w,\n/static/ed9d0072bd3a1de06fd8c2cdaeb84bac/37523/3.png 720w,\n/static/ed9d0072bd3a1de06fd8c2cdaeb84bac/302a4/3.png 1080w,\n/static/ed9d0072bd3a1de06fd8c2cdaeb84bac/07a9c/3.png 1440w,\n/static/ed9d0072bd3a1de06fd8c2cdaeb84bac/6660b/3.png 2278w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n</ul>\n</li>\n<li>\n<p>이제 Action을 사용할 기반 준비가 완료되었습니다. 이제 Action을 등록합니다.</p>\n<ul>\n<li>\n<p>Action → New workflow 로 워크플로우를 새로 생성합니다.</p>\n</li>\n<li>\n<p>기본적으로 node.js나 Jekyll와 같은 wokflow 템플릿이 존재합니다. 우리는 gatsby을 직접 workflow생성합니다. (set up a wokflow yourself →)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABmUlEQVQoz11S2W7jMAzM626bxLYOSqREXZbtHEXbfdn//7OF7K6TFhgQFODxzJA8DHaE9KHTh+KroFnQLN0i+eqnzzD/EVQHrMovyt96W1/O8rXTOw6d8tpNmheJo6JqeG5PqhgvlG/K1QewCHAC/I7DaQBDMdcb8Wh9ydPdpwkoAiWN0bpiXDauAEVtg8b0jMOxh06ipiQNAyWgZFyr0DjZ8tiqL8qG104fe3hGIwvwGKoAfxrMjmMPL2f1jOe0D7I07EJFrtTq6OKEq2AnsVPUK2rNd5yFbeTTYHpFnJcyv4HLLk7GZY1JYdwMW1+2OBrjGioDpUG7Nu2zsAK85fH++Zfz4uKkbPh1FL9P8gc2w3uEptxJFMDG5Xp5d2nmvGxS1pfVQtybYw8b55G5KZtGDuWyMXtF+yYH/bVYaXjQrpPYKxq02ybayBpjKBcbaovkC4a6p0UeMVRpQut9kW3V0fLYBtYurNn2nJc4XuE/x66/sOvZaIzft9WaL9udRGmDMFwv73m6j2uVhjVGaViA377bfP44kn8QtUwp2MhwNQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"4\"\n        title=\"4\"\n        src=\"/static/a7e43ac0c60ea549e5fcd017e79917d8/37523/4.png\"\n        srcset=\"/static/a7e43ac0c60ea549e5fcd017e79917d8/e9ff0/4.png 180w,\n/static/a7e43ac0c60ea549e5fcd017e79917d8/f21e7/4.png 360w,\n/static/a7e43ac0c60ea549e5fcd017e79917d8/37523/4.png 720w,\n/static/a7e43ac0c60ea549e5fcd017e79917d8/302a4/4.png 1080w,\n/static/a7e43ac0c60ea549e5fcd017e79917d8/07a9c/4.png 1440w,\n/static/a7e43ac0c60ea549e5fcd017e79917d8/5dded/4.png 1588w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n<li>\n<p>생성하면 기본 format으로 yaml파일이 하나 생성됩니다.</p>\n</li>\n<li>\n<p>해당 파일에 특정 브랜치에 특적 pr(pull request)가 왔을대, 특정 동작(jobs)을 생성 할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># This is a basic workflow to help you get started with Actions</span>\n\n<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Gatsby Deploy\n\n<span class=\"token comment\"># Controls when the workflow will run</span>\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># Triggers the workflow on push or pull request events but only for the \"master\" branch</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"master\"</span> <span class=\"token punctuation\">]</span>\n  <span class=\"token key atrule\">pull_request</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"master\"</span> <span class=\"token punctuation\">]</span>\n\n  <span class=\"token comment\"># Allows you to run this workflow manually from the Actions tab</span>\n  <span class=\"token key atrule\">workflow_dispatch</span><span class=\"token punctuation\">:</span>\n\n<span class=\"token comment\"># A workflow run is made up of one or more jobs that can run sequentially or in parallel</span>\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># This workflow contains a single job called \"build\"</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># The type of runner that the job will run on</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n\n    <span class=\"token comment\"># Steps represent a sequence of tasks that will be executed as part of the job</span>\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v3\n      <span class=\"token comment\"># build and deploy</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> enriikke/gatsby<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages<span class=\"token punctuation\">-</span>action@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">access-token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.DEPLOY <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">deploy-branch</span><span class=\"token punctuation\">:</span> gh<span class=\"token punctuation\">-</span>pages\n          <span class=\"token key atrule\">skip-publish</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></code></pre></div>\n<ul>\n<li>\n<p><a href=\"https://github.com/enriikke/gatsby-gh-pages-action\">https://github.com/enriikke/gatsby-gh-pages-action</a> 에 생성된 action을 활용합니다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">secrets.DEPLOY</code> 부분에, action용 secret 생성시 사용한 이름을 활용합니다.</p>\n</li>\n<li>\n<p>정상 구동시 아래와 같이 빌드 및 배포 결과를 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABkElEQVQoz3WRW4/aMBBGHUIwufgaxlccOzcIRWxfVqs+9KX//0+1ELqolVY6sj5ZPp7xGHFw2vfKJXMclEvHdDI+DePiu8l1k3LJhlG55OJ8MF3DFZWGCE2lodIg6EM8Lf10TfN1ON3S9M3H2fhB+36lfTg1g4YrIvS6riCwcbp893EGG9Xj9MFEoY7K3bPyvbKRt1aAF+CJ0GCjAM8eO6jVQbnEWkulYa1dg1THbljCsLg4uTgL8NoPoT9TaeN4aXXgh/tdCEIw3cDkXfvsp+HApGJSs1ZXVOKK7Wv+l1dGkLpuXuxxbHV4vYcDaM+kEgeNS4LQNssxQtsnWYGyIst3iGsHLn3O44EpiaQSCIeGSiruocC1OOgWnATHpWZCbXcVIvyfAT7bFpDOZx9GZTvtknapItz3QxovaboYn8CEAtfoP239Q1yye6ub3ZMcF7hpmKyJKGtWE1kTmRflF3LFNlu82e5Xshzjqnn78fPt49d8fR/Ot/F025XkSznLX/IKLtm+Fvua44rikv6p/Bt2ojKNf8bUvQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"5\"\n        title=\"5\"\n        src=\"/static/7bf964edb699ceda504d41031b207718/37523/5.png\"\n        srcset=\"/static/7bf964edb699ceda504d41031b207718/e9ff0/5.png 180w,\n/static/7bf964edb699ceda504d41031b207718/f21e7/5.png 360w,\n/static/7bf964edb699ceda504d41031b207718/37523/5.png 720w,\n/static/7bf964edb699ceda504d41031b207718/302a4/5.png 1080w,\n/static/7bf964edb699ceda504d41031b207718/07a9c/5.png 1440w,\n/static/7bf964edb699ceda504d41031b207718/a878e/5.png 2048w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<aside>\n💡 주의! `.github/workflows/main.yml` 파일은, 해당 workflow가 구동되어질 branch에 있어야 합니다.\n즉 develop에서 작업해서 master(혹은 gh-pages)로 deploy하는식으로 구성했다면 develop 브랜치에 해당 파일(`.github/workflows/main.yml`)이 있어야 합니다.\n</aside>\n<h3 id=\"netlify로-배포하기\" style=\"position:relative;\"><a href=\"#netlify%EB%A1%9C-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\" aria-label=\"netlify로 배포하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Netlify로 배포하기</h3>\n<ul>\n<li>\n<p><strong><a href=\"https://app.netlify.com/sites/hislogs/settings/deploys\">https://netlify.com</a> 에 접속합니다.</strong></p>\n</li>\n<li>\n<p>SSO로 로그인(가입) 가능한데, github연동하여 빌드할때 어차피  github연동이 필요하기 때문에 github으로 가입합니다.</p>\n</li>\n<li>\n<p>로컬 개발환경에 netify-cli 을 dev-dependency로 추가하거나, global로 설치합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">$ yarn add -D netlify-cli\n\n또는\n\n$ yarn global add netlify-cli</code></pre></div>\n</li>\n<li>\n<p>netlify.toml 파일을 생성합니다. 프로젝트 루트 위치에 생성합니다.</p>\n<ul>\n<li>현재 사용중인  Gatsby 템플릿은 이미 해당 파일이 존재합니다.</li>\n<li>다른 템플릿을 쓰거나, 꼭 Gatsby 프로젝트가 아니여도, netilfy.toml을 생성하여 관리 가능합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>build<span class=\"token punctuation\">]</span>\n  publish = <span class=\"token string\">\"public\"</span>\n  command = <span class=\"token string\">\"npm run build\"</span>\n<span class=\"token punctuation\">[</span>build.environment<span class=\"token punctuation\">]</span>\n  NODE_VERSION = <span class=\"token string\">\"16\"</span>\n  NPM_VERSION = <span class=\"token string\">\"8.12.1\"</span></code></pre></div>\n<ul>\n<li>설정은 매우 직관적입니다. publish 하려는 디렉토리와, 해당 디렉토리를 만들어내는 빌드 명령어를 명시합니다.</li>\n<li>해당 빌드 명령어가 구동될 node 및 npm 환경을 명시합니다.</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>주의! 이전 heroku와 같이 netlify에 배포하면 https://{your-site-name}.netlify.app 에 배포됩니다.</p>\n</blockquote>\n<p>따라서 github.io을 사용하고 싶은 경우에는, Github의 gh-page에 배포해야합니다.</p>\n<blockquote>\n</blockquote>\n<aside>\n💡 github.io에 배포하던, netlify.app 에 배포를 하던, 본인만의 DNS을 사용하는경우, 해당 DNS을 연결하면 하나의 URL(DNS)로 사용이 가능합니다.\n</aside>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li>공식 사이트 - <a href=\"https://www.gatsbyjs.com/docs/how-to/\">https://www.gatsbyjs.com/docs/how-to/</a></li>\n<li>gatsby로 블로그 만들기 post들\n<ul>\n<li><a href=\"https://hislogs.com/make-gatsby-blog/\">https://hislogs.com/make-gatsby-blog/</a></li>\n<li><a href=\"https://velog.io/@gparkkii/build-gatsby-blog\">https://velog.io/@gparkkii/build-gatsby-blog</a></li>\n</ul>\n</li>\n<li>utterances - <a href=\"https://utteranc.es/\">https://utteranc.es/</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%99%9C-%EB%B0%94%EA%BE%B8%EC%97%88%EB%82%98%EC%9A%94\">왜 바꾸었나요!</a></li>\n<li><a href=\"#gatsby-%EC%84%A4%EC%B9%98%ED%95%98%EA%B3%A0-local%EC%97%90%EC%84%9C-%EB%9D%84%EC%9B%8C%EB%B3%B4%EA%B8%B0\">Gatsby 설치하고 Local에서 띄워보기</a></li>\n<li><a href=\"#jekyll%EC%99%80-%EB%8B%AC%EB%A6%AC-%ED%8E%B8%EB%A6%AC%ED%96%88%EB%8D%98%EC%A0%90%EC%9D%80\">Jekyll와 달리 편리했던점은?</a></li>\n<li><a href=\"#jekyll-%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8D%98--post-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98-%ED%95%98%EA%B8%B0\">Jekyll 에서 사용하던  post 마이그레이션 하기</a></li>\n<li><a href=\"#utterances-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\">utterances 추가하기</a></li>\n<li><a href=\"#google-analytics-tracking-id--%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\">google analytics tracking id  추가하기</a></li>\n<li><a href=\"#github-gh-pages-%EB%A1%9C-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\">Github gh-pages 로 배포하기</a></li>\n<li><a href=\"#github-action-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\">Github Action 사용하기</a></li>\n<li><a href=\"#netlify%EB%A1%9C-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\">Netlify로 배포하기</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>\n</div>","frontmatter":{"date":"July 30, 2022","title":"Jekyll 을 Gatsby로 마이그레이션 하기","categories":"tech-talk","author":"gseok","emoji":null},"fields":{"slug":"/tech-talk-2022/2022-07-30-jekyll-to-gatsby/"}},"prev":{"id":"5065a1cc-a148-5c13-839e-246055be0876","html":"<h3 id=\"소개\" style=\"position:relative;\"><a href=\"#%EC%86%8C%EA%B0%9C\" aria-label=\"소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>소개</h3>\n<p>gatsby에서 stie의 <a href=\"https://namu.wiki/w/RSS\">RSS</a> feed을 생성하는 방법을 소개합니다.</p>\n<h3 id=\"방법\" style=\"position:relative;\"><a href=\"#%EB%B0%A9%EB%B2%95\" aria-label=\"방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>방법</h3>\n<p>gatsby는 기본적으로 plugin구조를 가지고 있어 여러 기능을 추가 할 수 있습니다. RSS Feed을 추가하는 기능 역시 plugin으로 존재합니다. gatsby 공식 사이트에서 <code class=\"language-text\">rss</code> 로 <a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-feed/?=rss\">plugin을 검색</a>해보면 여러 RSS Feed plugin이 존재하는것을 볼 수 있습니다.</p>\n<p>각 plugin은 각각의 설정 방법을 따라서 설치 및 RSS Reed을 생성해야 합니다. 본 소개에서는, 사용자 커스텀 plugin(community plugin)이 아닌, gatsby공식 plugin인 <code class=\"language-text\">gatsby-plugin-feed</code> 을 사용하여 rss을 생성하는 방법을 설명합니다.</p>\n<h3 id=\"gatsby-plugin-feed-설치\" style=\"position:relative;\"><a href=\"#gatsby-plugin-feed-%EC%84%A4%EC%B9%98\" aria-label=\"gatsby plugin feed 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-plugin-feed 설치</h3>\n<p>npm 이나 yarn 을 사용하여 plugin을 설치합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gatsby-plugin-feed</code></pre></div>\n<p>또는</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> gatsby-plugin-feed</code></pre></div>\n<h3 id=\"gatsby-plugin-feed-설정\" style=\"position:relative;\"><a href=\"#gatsby-plugin-feed-%EC%84%A4%EC%A0%95\" aria-label=\"gatsby plugin feed 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-plugin-feed 설정</h3>\n<p>plugin을 설치 후 gatsby-config.js 파일 및 gatsby-node.js파일에 gatsby-plugin-feed 사용 설정을 추가해주어야 합니다.</p>\n<p><strong>gatsby-config.js 설정</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// In your gatsby-config.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-feed</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">query</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n          {\n            site {\n              siteMetadata {\n                title\n                description\n                siteUrl\n                site_url: siteUrl\n              }\n            }\n          }\n        </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">feeds</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token function-variable function\">serialize</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">query</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> site<span class=\"token punctuation\">,</span> allMarkdownRemark <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> allMarkdownRemark<span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">node</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n                  <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> node<span class=\"token punctuation\">.</span>excerpt<span class=\"token punctuation\">,</span>\n                  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">,</span>\n                  <span class=\"token comment\">// 사이트 주소(post 주소포함)에 한글이 있는경우 encodeURI을 사용합니다.</span>\n                  <span class=\"token comment\">// slug는 사이트의 post주소을 이름으로 씁니다. gatsby-node.js와 연관 있습니다.</span>\n                  <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token function\">encodeURI</span><span class=\"token punctuation\">(</span>site<span class=\"token punctuation\">.</span>siteMetadata<span class=\"token punctuation\">.</span>siteUrl <span class=\"token operator\">+</span> node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token literal-property property\">guid</span><span class=\"token operator\">:</span> site<span class=\"token punctuation\">.</span>siteMetadata<span class=\"token punctuation\">.</span>siteUrl <span class=\"token operator\">+</span> node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">,</span>\n                  <span class=\"token literal-property property\">custom_elements</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> <span class=\"token string-property property\">\"content:encoded\"</span><span class=\"token operator\">:</span> node<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">query</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n              {\n                allMarkdownRemark(\n                  sort: { order: DESC, fields: [frontmatter___date] },\n                ) {\n                  nodes {\n                    excerpt\n                    html\n                    fields {\n                      slug\n                    }\n                    frontmatter {\n                      title\n                      date\n                    }\n                  }\n                }\n              }\n            </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            <span class=\"token comment\">// 최종 rss feed파일 입니다. 디렉토리가 다르거나, 이름이 다른경우 설정 가능합니다.</span>\n            <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/rss.xml\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token comment\">// 본인의 blog rss feed용 타이틀을 명시합니다.</span>\n            <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Your Site's RSS Feed\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token comment\">// optional configuration to insert feed reference in pages:</span>\n            <span class=\"token comment\">// if `string` is used, it will be used to create RegExp and then test if pathname of</span>\n            <span class=\"token comment\">// current page satisfied this regular expression;</span>\n            <span class=\"token comment\">// if not provided or `undefined`, all pages will have feed reference inserted</span>\n            <span class=\"token comment\">// 전체 site주소에서 특정 주소 패턴만 rss feed생성해주는 부분입니다. 옵션널한 설정으로, 전체 사이트 rss시에는 제거해도 무방합니다.</span>\n            <span class=\"token literal-property property\">match</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^/blog/\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token comment\">// optional configuration to specify external rss feed, such as feedburner</span>\n            <span class=\"token comment\">// feedburner같은 외부 rss feed서비스 사용시에 씁니다. 미사용시 제거합니다.</span>\n            <span class=\"token literal-property property\">link</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://feeds.feedburner.com/gatsby/blog\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>gatsby-node.js 설정</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createFilePath <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-source-filesystem</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">MarkdownRemark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">slug</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      node<span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>gatsby-config.js의  plugin설정에서 사용(query, feed등)하는 slug등와 같은 값은 gatsby-node.js에서 초기화 됩니다. 따라서 gatsby-node.js에 위와 같은 설정이 없다면 추가해주어야 합니다.</li>\n</ul>\n<p><strong>주의사항</strong></p>\n<p>💡 주의!</p>\n<blockquote>\n<p><a href=\"https://www.gatsbyjs.com/docs/how-to/adding-common-features/adding-an-rss-feed/\">Gatsby공식 문서</a>에 단순 “plugins: [<code class=\"language-text\">gatsby-plugin-feed</code>]” 설정만 <code class=\"language-text\">gatsby-config.js</code>파일에 추가 하여도 된다고 되어있는데, 이경우 아래와 같은 에러가 발생 할 수 있습니다. 따라서 해당 에러 발생시, Plugin사용 설정을 Full(Customizing the rss feed plugin)형태로 해주어야 합니다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">에러 예시\n\nERROR <span class=\"token comment\">#11331  PLUGIN</span>\n\nInvalid plugin options <span class=\"token keyword\">for</span> <span class=\"token string\">\"gatsby-plugin-feed\"</span><span class=\"token builtin class-name\">:</span>\n\n-<span class=\"token string\">\"feeds\"</span> is required</code></pre></div>\n</aside>\n<h3 id=\"rss-feed-파일-생성rssxml-확인하기\" style=\"position:relative;\"><a href=\"#rss-feed-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1rssxml-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\" aria-label=\"rss feed 파일 생성rssxml 확인하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RSS Feed 파일 생성(RSS.xml) 확인하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">gatsby clean <span class=\"token operator\">&amp;&amp;</span> gatsby build</code></pre></div>\n<p>명령어를 통해서, clean 상태에서 gatsby build을 구동하여 rss.xml파일 생성을 확인 할 수 있습니다.</p>\n<p>추가적으로 아래 명령어를 통하여 local 개발 환경에서 build 및 serve을 하고 실제 주소에 접속하여 rss feed을 확인 할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">gatsby clean <span class=\"token operator\">&amp;&amp;</span> gatsby build <span class=\"token operator\">&amp;&amp;</span> gatsby serve</code></pre></div>\n<ul>\n<li>정상 구동시 <a href=\"http://localhost:9000/rss.xml\">http://localhost:9000/rss.xml</a> 에 접속하여 rss.xml 확인이 가능합니다.</li>\n<li>만약 gatsby-config.js 파일에서 rss.xml 위치나 이름을 다르게 하였다면 변경한 주소 및 이름을 사용하여 확인하여야 합니다.</li>\n</ul>\n<h3 id=\"rss-feed-정상-확인하기\" style=\"position:relative;\"><a href=\"#rss-feed-%EC%A0%95%EC%83%81-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\" aria-label=\"rss feed 정상 확인하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RSS Feed 정상 확인하기</h3>\n<p>RSS Feed가 정상 생성되었는지 확인하는 방법 입니다. 보통 영어권 사용에, Gatsby나 Jeklly이 기본 혹은 공식으로 제공하는 plugin을 활용하면 거의 정상적인  RSS Feed파일(rss.xml)이 생성됩니다.</p>\n<p>만약 RSS Feed을 커스터마이징 하여, 해당 파일의 정상 여부를 확인하고 싶을때 추가적으로 사용할수 있는 방법 입니다.</p>\n<p><strong>W3C에서 제공하는 RSS Feed Validation Service 로 검증하기</strong></p>\n<ul>\n<li>Feed의 정상적인 Syntax(RSS, Atom), 사용을 검증합니다.</li>\n<li><a href=\"https://validator.w3.org/feed/\">Feed Validatin Service(W3C)</a></li>\n</ul>\n<p><strong>Online Feed Viewer로 검증하기</strong></p>\n<ul>\n<li>Online에 존재하는 Feed Viewer을 사용하여, 정상적으로 Feed가 노출되나 검증합니다.</li>\n<li>google 등에서 <code class=\"language-text\">rss feed reader online</code> 등과 같은 검색어로 검색 이후, 나오는 여러 Online Feed Viewer을 사용하여 정상 인식되나 확인합니다.</li>\n</ul>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://namu.wiki/w/RSS\">https://namu.wiki/w/RSS</a></li>\n<li><a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-feed/\">https://www.gatsbyjs.com/plugins/gatsby-plugin-feed/</a></li>\n<li><a href=\"https://www.gatsbyjs.com/docs/how-to/adding-common-features/adding-an-rss-feed/\">https://www.gatsbyjs.com/docs/how-to/adding-common-features/adding-an-rss-feed/</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%86%8C%EA%B0%9C\">소개</a></li>\n<li><a href=\"#%EB%B0%A9%EB%B2%95\">방법</a></li>\n<li><a href=\"#gatsby-plugin-feed-%EC%84%A4%EC%B9%98\">gatsby-plugin-feed 설치</a></li>\n<li><a href=\"#gatsby-plugin-feed-%EC%84%A4%EC%A0%95\">gatsby-plugin-feed 설정</a></li>\n<li><a href=\"#rss-feed-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1rssxml-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\">RSS Feed 파일 생성(RSS.xml) 확인하기</a></li>\n<li><a href=\"#rss-feed-%EC%A0%95%EC%83%81-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\">RSS Feed 정상 확인하기</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>\n</div>","frontmatter":{"date":"August 15, 2022","title":"Gatsby RSS Feed 추가하기","categories":"tech-talk","author":"gseok","emoji":null},"fields":{"slug":"/tech-talk-2022/2022-08-15-Gatsby-RSS-Feed/"}},"site":{"siteMetadata":{"siteUrl":"https://gseok.github.io","comments":{"utterances":{"repo":"gseok/gseok.github.com"}}}}},"pageContext":{"slug":"/tech-talk-2022/2022-08-05-http-cache-browser-cache/","nextSlug":"/tech-talk-2022/2022-07-30-jekyll-to-gatsby/","prevSlug":"/tech-talk-2022/2022-08-15-Gatsby-RSS-Feed/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}